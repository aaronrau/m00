{"version":3,"sources":["app.js","app.util.js","app.popup.js","app.dal.js","app.controller.js","app.login.js","app.controls.js"],"names":["cELM","tag","classes","e","document","createElement","className","isMobile","test","navigator","userAgent","getURLParameter","name","decodeURIComponent","RegExp","exec","location","search","replace","checkBrowserCompatibility","HtmlEncode","s","el","innerText","textContent","innerHTML","IsEmpty","str","length","contains","str1","str2","indexOf","RGBAObjToHex","color","r","parseInt","g","b","toString","GetScreenDim","w","window","d","documentElement","getElementsByTagName","x","innerWidth","clientWidth","y","innerHeight","clientHeight","width","height","LoadCSS","url","link","type","rel","href","h","i","children","c","appendChild","guidGenerator","S4","Math","random","substring","URLFriendly","result","toLowerCase","URLFriendlyTags","setCookie","cname","cvalue","exdays","Date","setTime","getTime","expires","toGMTString","cookie","getCookie","re","value","unescape","getStoredKVP","key","localStorage","getItem","setStoredKVP","setItem","httpGet","params","callback","p","n","prop","xmlHttp","XMLHttpRequest","onreadystatechange","readyState","status","JSON","parse","responseText","ex","open","send","getURLParts","parts","pathname","split","push","getURLHashPath","hash","query","substr","forEach","part","getURLQueryParams","item","app","Ext","out","arguments","obj","hasOwnProperty","Element","prototype","addELM","object","elm","getHTML","this","insertELM","firstChild","insertBefore","removeELM","destroy","getELM","removeChild","logout","Parse","User","logOut","setTimeout","reload","_LOGIN_PARAMS","Start","before","after","addEventListener","event","Init","FF","feature_flag","Controller","checkFeature","sections","currentUser","current","usect","get","overrideSections","sectionBadges","setFeatureFlags","ff","f","enabled","toUpperCase","getElementById","style","display","nameArea","profile","profileURL","nBtProfile","controls","ExpandButton","button_text","classname","selections","text","detailText","onclick","click","initLoginType","login","initSectionSelections","showSection","logo","popup","lPopup","_params","_mode","mode","contentType","content","Login","user","onLoginSuccess","id","getSessionToken","lastLoginPath","currentPath","loginPopup","isDisableClose","Popup","init","disableClosing","show","startLogin","String","toTitleCase","j","lowers","uppers","txt","charAt","_this","_content","_cParams","_isDisableClosing","_CLASS","_setCLASSNAME","cancelBubble","stopPropagation","popPopup","preventDefault","dt","dataTransfer","files","types","items","getData","saveEvent","onDropEvent","btBack","elmHeader","elmHeaderTitleContainer","elmHeaderTitle","readOnly","elmNotificationArea","_notificationElm","elmControls","elmContent","spacer","ctrl","bool","body","setClass","clearNotification","nt","setNotification","getTitle","cParams","additionalCSS","clearContent","title","css","isShown","parentNode","hide","unlockWindow","history","pushPopup","lockWindow","DAL","getObjectFromParse","parseObj","attributes","objectId","setParseObject","k","set","loginSocial","email","password","success","error","logIn","Cloud","run","er","signUp","pw","em","ep","console","log","_doc","_getElmById","_getElmByClass","getElementsByClassName","SECTION_PATH","MODULE_PATH","CSS_PATH","_windowPosition","_popupStacks","_sectionParams","_currentSection","_sections","_modules","_SectionNavButtons","_SectionNavBadges","_featureFlags","_loadSection","sName","container","defaultPath","host","titleArea","hs","ht","querySelector","param","buttonId","badge","_renderSection","require","section","isLogin","render","err","Mod","RegMods","RegMod","mod","names","paths","moduleNames","mName","Bind","module","componentsNames","objects","isNaN","uicomponent","moduleName","ext","become","token","then","alert","flags","self","pageXOffset","scrollLeft","pageYOffset","scrollTop","html","data","overflow","scrollTo","scrollPosition","closePopovers","expandButtons","path","state","objectHash","replaceState","pushState","onpopstate","pop","back","sectionNames","onscroll","fs","footer","ul","anc","bt","base","hasBadge","_CTRL","initSectionName","loc","sn","csec","clear","bId","sec","mods","completeLogin","_isOAuthOnly","isOAuthOnly","onLoginSignUp","msgArea","txtUsername","setAttribute","txtPassword","txtFullname","txtTitle","txtNote","btForgot","btSwitch","btAction","aSocialLogin","btGmail","btFacebook","btTwitter","swithMode","m","visibility","showControls","loginOrSignup","keyCode","isShow","hideControls","code","message","google","facebook","twitter","or","hasName","Selections","config","SelectionHeader","_onAdd","onAdd","_onFocus","onFocus","_onBlur","onBlur","_onKeyup","onKeyup","loading","input","btAdd","btOK","_completeAdd","results","_start","_adding","blur","focus","onkeyup","onkeypress","reset","onfocus","onblur","SelectionSearchHeader","_onSearch","onSearch","_onFilter","onFilter","btSearch","isFirstFocus","_completeSearch","_searching","SelectionItem","_data","_isSelect","isSelected","_template","template","_onSelect","onSelect","update","select","isSelect","_items","_config","_selectedItems","_unSelectedItems","_selectionSessionData","_getData","_finishedSelection","finishedSelection","_addData","addData","_searchData","searchData","_onShow","onShow","_onDone","onDone","_onSelectHandler","_footer","_originalData","_itemTemplate","itemTemplate","cssName","content_scroll","loadingSpinner","plcHolder","emptyMessage","addingElm","btDone","_refreshData","_addEntry","isInsert","_id","header","newLists","_showOriginalData","newList","_clearData","headerTemplate","getSelections","session","selected","unselected","disableContent","finish","setSessionData","sdata","BindInputsToData","_css","_onChange","onChange","onDelete","_allInputElms","_allRowElms","_elm","dom","_change","data_type","getAttribute","data_value","data_table_column","rowIdx","source","column","checked","rowData","guid","removeIdx","splice","v","dValue","groupname","relatedInputs","querySelectorAll","ri","relatedInput","rSource","undefined","bindInput","element","attribute","prefixHash","qi","qt","inputIn","inputText","inputs","data_column","inp","onchange","refHash","tb","tables","onAddRow","idx","row","cloneNode","childNodes","nodeName","btDelete","deleteIdx","rowTemplate","_setInputValue","dateInputValue","dataSet","updatedTables","Array","isArray","diff","l","abs","rowElm","rProp","rowItemValue","pickerHash","trim","BindModelToInputs","model","Object","call","subProp","main_button","expand","a1","a2","spacing","button","icon","dtxt","ProgressBar","bar","barLabel","percent","Segment","_segElms","clearSelect","segments","segD","sg","label"],"mappings":"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","file":"app.min.js","sourcesContent":["/*\nThe MIT License (MIT)\nCopyright (c) 2015 Aaron Rau\n\nPermission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:\nThe above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n*/\n\n// top-level namespace being assigned an object literal\nvar app = app || {};\n\n//core framework functions  --------------------------\napp.Ext = function(out) {\n  out = out || {};\n\n  for (var i = 1; i < arguments.length; i++) {\n    var obj = arguments[i];\n\n    if (!obj)\n      continue;\n\n    for (var key in obj) {\n      if (obj.hasOwnProperty(key)) {\n        if (typeof obj[key] === 'object')\n          out[key] = app.Ext(out[key], obj[key]);\n        else\n          out[key] = obj[key];\n      }\n    }\n  }\n\n  return out;\n};\nElement.prototype.addELM = function(object) {\n  var elm = object;\n  if (object.getHTML) {\n    elm = object.getHTML();\n  }\n  return (this.appendChild(elm));\n}\nElement.prototype.insertELM = function(object)\n{ //Insert into top of stack\n\n    var elm = object;\n\n        \n    if(object.getHTML)\n    {\n      elm = object.getHTML();\n    }\n    \n    var firstChild = this.firstChild;\n    if(firstChild)\n    {\n      return (this.insertBefore(elm, firstChild));\n    }\n    else\n    {\n      return(this.appendChild(elm));\n    }\n}\nElement.prototype.removeELM = function(object) {\n  var elm = object;\n  if (object.destroy) {\n    object.destroy();\n  }\n  if (object.getELM) {\n    elm = object.getELM();\n  }\n  return (this.removeChild(elm));\n}\n\nfunction cELM(tag,classes)\n{\n  var e = document.createElement(tag); \n  if (classes) {\n    e.className = classes;\n  };\n  \n  return e\n}\n\n//global auth / init functions --------------------------\n//AR TODO migrate to app?\n\n\nvar logout = function() {\n  setCookie('username', \"\", 325);\n  setCookie('userId', \"\", 325);\n  setCookie('session_token', \"\", 325);\n\n  Parse.User.logOut();\n\n  setTimeout(function() {\n    location.reload();\n  }, 800);\n}\n\nvar _LOGIN_PARAMS = null;\n\n\napp.Start = function(params,before,after) {\n\n  document.addEventListener(\"DOMContentLoaded\", function(event) { \n    app.Init(params,before,after);\n  });\n\n}\napp.FF = function(feature_flag)\n{\n  return app.Controller.checkFeature(feature_flag);\n}\napp.Init = function(params,before,after) {\n\n  if(before)\n      if(!before())\n        return;\n\n  var sections = params.sections ? params.sections : {};\n\n  \n  var currentUser = Parse.User.current();\n  if(currentUser)\n  {\n    var usect = currentUser.get('sections');\n    var overrideSections = currentUser.get('overrideSections');\n    var sectionBadges = currentUser.get('sectionBadges');\n    app.Controller.sectionBadges = sectionBadges;\n    \n    app.Controller.setFeatureFlags({});\n    if(overrideSections && usect)\n    {\n      var ff = {};\n      for(var s in usect)\n      {\n        if(usect[s][\"features\"])\n        {\n          for(var f in usect[s][\"features\"])\n          {\n            var enabled = usect[s][\"features\"][f];\n            if(enabled)\n            {\n              ff[s.toUpperCase()+'-'+f.toUpperCase()] = true;  \n            }\n            \n          }\n        }\n      }\n      \n      app.Controller.setFeatureFlags(ff);\n    }\n\n    if(usect)\n      if(overrideSections)\n      {\n        sections = usect;\n      }\n      else\n      {\n        for(var s in usect)\n        {\n          sections[s] = usect[s];\n        }\n      }    \n  }\n\n  \n\n  if (document.getElementById('btLogin')) {\n    if (currentUser) {\n      document.getElementById('btLogin').style.display = 'none';\n\n      var nameArea = document.getElementById('username');\n      if(nameArea)\n        nameArea.innerHTML = currentUser.get(\"username\");\n\n      var profile = document.getElementById('userprofile');\n\n      var profileURL = currentUser.get(\"profileURL\");\n      if (!profileURL) {\n        profileURL = '/images/profile_default.png';\n      }\n\n      var nBtProfile = new app.controls.ExpandButton({\n        button_text: \"<img src=\" + profileURL + \">\",\n        classname: 'profile_nav',\n        selections: [{\n          classname: 'ep_logout',\n          text: 'Logout',\n          detailText: 'Signout of my current account',\n          onclick: function() {\n          logout();\n          }\n        }]\n      });\n\n      if(nameArea)\n        nameArea.onclick = function(e) {\n          nBtProfile.click(e);\n        }\n\n      profile.addELM(nBtProfile);\n\n    } \n    else {\n      if(document.getElementById('username'))\n        document.getElementById('username').style.display = 'none';\n      document.getElementById('userprofile').style.display = 'none';\n    }\n  }\n  else {\n    if(params)\n    {\n      if(params.login)\n      {\n        \n        initLoginType(params);      \n      }\n      else\n      {\n        initLoginType('login');    \n      }\n\n    }\n    else\n    {\n      initLoginType('login');\n    }\n  }\n\n  if(params)\n    if(params.login)\n    {\n      _LOGIN_PARAMS = params.login;\n\n    }\n\n  app.Controller.initSectionSelections(sections);\n  app.Controller.showSection();\n  \n  if(after)\n    after();\n}\n\n\nvar logo = function() {\n  window.location = '/';\n}\n\n//AR:todo clean up\nvar popup;\nvar lPopup;\nvar initLoginType = function(params) {\n\n  var _params = null;\n  var _mode = null;\n  if(typeof params === 'object')\n  {\n    _mode = params.login.mode;\n    _params = params;\n\n    _LOGIN_PARAMS = params.login;\n\n  }\n  else if(typeof params === 'string')\n  {\n    _mode = params; // type\n    _LOGIN_PARAMS = params;\n  }\n\n\n  var contentType = document.getElementById(_mode + '_page');\n  if (contentType) {\n    var content = new app.Login(_params ? _params.login : _mode, function(user) {\n      onLoginSuccess(user);\n    })\n    contentType.addELM(content);\n  }\n\n}\n\nvar onLoginSuccess = function(user) {\n\n  setCookie('userId', user.id, 325);\n  setCookie('session_token', user.getSessionToken(), 325);\n  //setCookie('username',user.get('fbUsername'),325);\n  setTimeout(function() {\n\n    var lastLoginPath = getCookie('lastLoginPath');\n\n    if(!IsEmpty(lastLoginPath))\n    {\n      if(lastLoginPath == 'null')\n      {\n        window.location = '/';\n      }\n      else\n      {\n        var currentPath = window.location.toString();\n        if(lastLoginPath.indexOf('#') > -1 && currentPath == lastLoginPath)\n        {\n          window.location.reload();\n          return;\n        }\n        else\n        {\n          window.location = lastLoginPath;\n        }\n      }\n    }\n    else\n    {\n      window.location = '/';  \n    }\n    \n  }, 800);\n}\n\n\n\nvar loginPopup = function(isDisableClose) {\n  lPopup = new app.Popup();\n\n\n  lPopup.init(new app.Login(_LOGIN_PARAMS, function(user) {\n    onLoginSuccess(user);\n  }));\n\n  if(isDisableClose)\n    lPopup.disableClosing(true);\n\n  lPopup.show(true);\n}\n\nvar startLogin = function() {\n\n\n  if(!lPopup)\n  {\n    lPopup = new app.Popup();\n      lPopup.init(new app.Login(_LOGIN_PARAMS, function(user) {\n        onLoginSuccess(user);\n      }));    \n  }\n  \n  lPopup.show(true);\n}\n","function isMobile()\n{\n\treturn /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) \n}\n\nfunction getURLParameter(name) {\n  return decodeURIComponent((new RegExp('[?|&]' + name + '=' + '([^&;]+?)(&|#|;|$)').exec(location.search)||[,\"\"])[1].replace(/\\+/g, '%20'))||null\n}\n\nfunction checkBrowserCompatibility()\n{\n\n}\n\nfunction HtmlEncode(s)\n{\n  var el = document.createElement(\"div\");\n  el.innerText = el.textContent = s;\n  s = el.innerHTML;\n  return s;\n}\n\nfunction IsEmpty(str) {\n    return (!str || 0 === str.length || /^\\s*$/.test(str));\n}\n\nfunction contains(str1,str2)\n{\n\treturn str1.indexOf(str2) != - 1;\n}\n\nfunction RGBAObjToHex(color)\n{\n\tvar r = parseInt(255*color.r);\n\tvar g = parseInt(255*color.g);\n\tvar b = parseInt(255*color.b);\n\n\t\n\treturn '#'+r.toString(16)+g.toString(16)+b.toString(16);\n\n}\n\nfunction GetScreenDim(){\n\tvar w = window,\n    d = document,\n    e = d.documentElement,\n    g = d.getElementsByTagName('body')[0],\n    x = w.innerWidth || e.clientWidth || g.clientWidth,\n    y = w.innerHeight|| e.clientHeight|| g.clientHeight;\n\n    return ({\n    \twidth:x,\n    \theight:y\n    })\n}\n\nfunction LoadCSS(url) {\n    var link = document.createElement(\"link\");\n    link.type = \"text/css\";\n    link.rel = \"stylesheet\";\n    link.href = url;\n\n    var h = false;\n    for(var i = 0; i < document.getElementsByTagName(\"head\")[0].children.length; i++)\n    {\n    \tvar c = document.getElementsByTagName(\"head\")[0].children[i];\n    \tif(c.href == link)\n    \t{\n    \t\th = true;\n    \t\tbreak;\n    \t}\t\n    }\n\n    if(!h)\n    \tdocument.getElementsByTagName(\"head\")[0].appendChild(link);\n}\nfunction guidGenerator() {\n    var S4 = function() {\n       return (((1+Math.random())*0x10000)|0).toString(16).substring(1);\n    };\n    return (S4()+S4()+\"-\"+S4()+\"-\"+S4()+\"-\"+S4()+\"-\"+S4()+S4()+S4());\n}\nfunction URLFriendly(str)\n{\n\tif(!IsEmpty(str))\n\t{\n\t\tvar result = str.toLowerCase().replace(/^\\s+|\\s+$/g,'').replace(/[^a-zA-Z\\d\\s]/g, '').replace(/\\s/g,'-');\n\t    return(result);\n\t}\n\telse\n\t{\n\t\treturn \"\";\n\t}\n\n}\n\nfunction URLFriendlyTags(str)\n{\n\tvar result = str.toLowerCase().replace(/^\\s+|\\s+$/g,'').replace(/[^a-zA-Z\\d\\s]/g, '').replace(/\\s/g,'+');\n    return(result);\n}\nfunction setCookie(cname,cvalue,exdays)\n{\n\tvar d = new Date();\n\td.setTime(d.getTime()+(exdays*24*60*60*1000));\n\tvar expires = \"expires=\"+d.toGMTString();\n\t//document.cookie = cname + \"=\" + cvalue + \"; \" + expires +\";domain=app-dev.bestlyst.com:5000;path=/\";\n\tdocument.cookie = cname + \"=\" + cvalue + \"; \" + expires +\";path=/\";\n}\nfunction getCookie(name)\n{\n    var re = new RegExp(name + \"=([^;]+)\");\n    var value = re.exec(document.cookie);\n    return (value != null) ? unescape(value[1]) : null;\n}\nfunction getStoredKVP(key)\n{\n\tif(typeof(Storage) !== \"undefined\") {\n    // Code for localStorage/sessionStorage.\n    \treturn localStorage.getItem(key);\n\t} else {\n\t    // Sorry! No Web Storage support..\n\t    return getCookie(key);\n\t}\n}\nfunction setStoredKVP(key,value)\n{\n\tif(typeof(Storage) !== \"undefined\") {\n    // Code for localStorage/sessionStorage.\n    \tlocalStorage.setItem(key, value);\n\t} else {\n\t    // Sorry! No Web Storage support..\n\t    setCookie(key,value,325);\n\n\t}\n}\nString.prototype.toTitleCase = function() {\n  var i, j, str, lowers, uppers;\n  str = this.replace(/([^\\W_]+[^\\s-]*) */g, function(txt) {\n    return txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase();\n  });\n\n  // Certain minor words should be left lowercase unless \n  // they are the first or last words in the string\n  lowers = ['A', 'An', 'The', 'And', 'But', 'Or', 'For', 'Nor', 'As', 'At', \n  'By', 'For', 'From', 'In', 'Into', 'Near', 'Of', 'On', 'Onto', 'To', 'With'];\n  for (i = 0, j = lowers.length; i < j; i++)\n    str = str.replace(new RegExp('\\\\s' + lowers[i] + '\\\\s', 'g'), \n      function(txt) {\n        return txt.toLowerCase();\n      });\n\n  // Certain words such as initialisms or acronyms should be left uppercase\n  uppers = ['Id', 'Tv'];\n  for (i = 0, j = uppers.length; i < j; i++)\n    str = str.replace(new RegExp('\\\\b' + uppers[i] + '\\\\b', 'g'), \n      uppers[i].toUpperCase());\n\n  return str;\n}\n\nfunction httpGet(url, params,callback)\n{\n\tvar p = \"\";\n\tif(params)\n\t{\n\t\tvar n = new Date().getTime();\n\n\t\tfor(var prop in params)\n\t\t{\n\t\t\tp += p+'&'+prop+\"=\"+params[prop];\n\t\t}\n\n\t\tif(url.indexOf('?') > -1)\n\t\t{\n\t\t\tp = '&dt='+n+p;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tp = '?dt='+n+p;\n\t\t}\n\t}\n\n    var xmlHttp = new XMLHttpRequest();\n    xmlHttp.onreadystatechange = function() { \n        if (xmlHttp.readyState == 4 && xmlHttp.status == 200)\n        {\n        \ttry{\n        \t\tcallback(JSON.parse(xmlHttp.responseText));\n        \t}catch(ex){\n        \t\tcallback(xmlHttp.responseText);\n        \t}\n        \t\n        }\n    }\n    xmlHttp.open(\"GET\", url+p, true); // true for asynchronous \n    xmlHttp.send(null);\n}\n\nfunction getURLParts(url)\n{\n\tvar parts = [];\n\tvar result = {};\n\tvar p = url.pathname.split( '/' );\n\tfor(var i = 0; i < p.length; i++)\n\t{\n\t\tif(i > 0)\n\t\t\tif(!IsEmpty(p[i]))\n\t\t\t\tparts.push(p[i]);\n\t}\n\treturn parts;\t\n\t\n}\nfunction getURLHashPath(url){\n\n\tvar parts = [];\n\n\tif(url.hash) {\n\t\tquery = url.hash.substr(1);\n\t\tvar result = {};\n\t\tquery.split(\"/\").forEach(function(part) {\n\t\t\n\t\t\tparts.push(part);\n\t\t});\n\t\treturn parts;\t\n\t}\n\t\n\n\treturn parts\n\n}\nfunction getURLQueryParams(key,url) {\n\n\tvar query = {};\n\n\tif(url.hash) {\n\t\tquery = url.hash.substr(1);\n\t\tvar result = {};\n\t\tquery.split(\"&\").forEach(function(part) {\n\t\tvar item = part.split(\"=\");\n\t\t\tresult[item[0]] = decodeURIComponent(item[1]);\n\t\t});\n\t\treturn result;\t\t\n\t  // Fragment exists\n\t} else {\n\t\tquery = url.search.substr(1);\n\t\tvar result = {};\n\t\tquery.split(\"&\").forEach(function(part) {\n\t\tvar item = part.split(\"=\");\n\t\t\tresult[item[0]] = decodeURIComponent(item[1]);\n\t\t});\n\t\treturn result;\n\t}\n\n\n\n}","/*\nThe MIT License (MIT)\nCopyright (c) 2015 Aaron Rau\n\nPermission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:\nThe above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n*/\n\napp.Ext(app,{Popup:function(params){\n\t\tvar Popup ={};\n\t\tvar _this = Popup;\n\t\tvar _content = null;\n\t\tvar _params = params;\n\t\tvar _cParams = null;\n\n\t\t//Private Property\n\t\tvar _isDisableClosing = false;\n\n\t\tvar _CLASS = \"popup\";\n\t\tvar _setCLASSNAME = null;\n\n\t\tvar elm = cELM('div','popup');\n\t\t\telm.addEventListener(\"click\", function(e){\n\t\t\t\tif (!e) var e = window.event;\n            \te.cancelBubble = true;\n        \t\tif (e.stopPropagation) e.stopPropagation();\n\t\t\t\t\n\t\t\t\tif(!_isDisableClosing)\n\t\t\t\t\tapp.Controller.popPopup();\n\t\t\t});\n\n\t\t\t\n\t\t\telm.addEventListener(\"dragover\", function(e) {\n\t\t\t    e.preventDefault();\n\t\t\t    elm.className = _CLASS + ' '+(_setCLASSNAME ? _setCLASSNAME : '')+\" dragover\";\n\t\t\t});\n\t\t\telm.addEventListener(\"dragleave\", function(e) {\n\t\t\t    e.preventDefault();\n\t\t\t\telm.className = _CLASS + ' '+(_setCLASSNAME ? _setCLASSNAME : '');\n\t\t\t});\n\t\t\telm.addEventListener(\"drop\", function(e) {\n\t\t\t    e.preventDefault();\n\t\t\t    elm.className = _CLASS + ' '+(_setCLASSNAME ? _setCLASSNAME : '')\n\t\t\t    \n\t\t\t    var dt = e.dataTransfer;\n\t\t\t    \n\t\t\t    var types = dt.types;\n\t\t\t    var files = dt.files;\n\t\t\t    var items = dt.items;\n\t\t\t\tvar url = dt.getData('url');\n\t\t\t\t\n\t\t\t\tif (!url) {\n\t\t\t\t    url = dt.getData('text/plain');\n\t\t\t\t    if (!url) {\n\t\t\t\t        url = dt.getData('text/uri-list');\n\t\t\t\t            if (!url) {\n\t\t\t\t                // We have tried all that we can to get this url but we can't. Abort mission\n\t\t\t\t                 //return;\n\t\t\t\t             }\n\t\t\t\t         }\n\t\t\t\t}\n\n\t\t\t    //AR: mock event so it can be used by dropzone\n\t\t\t    var saveEvent = {\n\t\t\t    \tdataTransfer:{\n\t\t\t    \t\tfiles:files,\n\t\t\t    \t\titems:items,\n\t\t\t    \t\turl:url\n\t\t\t    \t}\n\t\t\t    }\n\n\t\t\t   \tif(_content)\n\t\t\t\tif(_content.onDropEvent)\n\t\t\t\t\t_content.onDropEvent(saveEvent)\n\t\t\t    \n\t\t\t});\n\n\n\n\t\tvar btBack = cELM('div','btBack');\n\t\tbtBack.onclick = function()\n\t\t{\n\t\t\tapp.Controller.popPopup();\n\t\t}\n\t\tvar elmHeader = cELM('div','header');\n\t\tvar elmHeaderTitleContainer = cELM('div','title_container');\n\t\tvar elmHeaderTitle = cELM('div','title');\n\t\t//var elmHeaderTitle = cELM('input','title');\n\t\telmHeaderTitle.readOnly = true;\n\n\t\tvar elmNotificationArea = cELM('div','notification');\n\t\tvar _notificationElm = null;\n\n\t\tvar elmControls = cELM('div','header_controls');\n\n\t\tvar elmContent = cELM('div','scroll_content');\n\t\tvar spacer = cELM('div','scroll_spacer');\n\t\telmContent.addELM(spacer);\n\n\t\telmHeader.addELM(btBack);\n\t\telmHeader.addELM(elmHeaderTitleContainer);\n\t\telmHeaderTitleContainer.addELM(elmHeaderTitle);\n\t\telmHeader.addELM(elmControls);\n\n\t\tif(_params)\n\t\tif(_params.mode)\n\t\t{\n\t\t\telm.addELM(elmHeader);\n\t\t\telm.addELM(elmNotificationArea);\n\t\t\tif(_params.controls)\n\t\t\t{\n\t\t\t\tfor(var i = 0; i < _params.controls.length; i++)\n\t\t\t\t{\n\t\t\t\t\tvar ctrl = _params.controls[i];\n\t\t\t\t\telmControls.addELM(ctrl);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\telm.addELM(elmContent);\n\t\t}\n\t\telse\n\t\t{\n\t\t\telm.addELM(elmNotificationArea);\n\t\t}\n\n\n\t\tif(!params)\n\t\t{\n\t\t\telm.addELM(elmNotificationArea);\n\t\t}\n\t\t//var content = cELM('div','form');\n\n\t\tPopup.disableClosing = function(bool){\n\t\t\t_isDisableClosing = bool;\n\n\t\t};\n\n\t\tdocument.body.appendChild(elm);\n\t\tPopup.setClass = function(c)\n\t\t{\n\t\t\t_setCLASSNAME = c;\n\n\t\t\telm.className = _CLASS+' '+_setCLASSNAME;\n\t\t}\n\t\tPopup.clearNotification = function(){\n\t\t\tvar nt = elmNotificationArea;\n\t\t\tif(nt)\n\t\t\t{\n\t\t\t  if(_notificationElm)\n\t\t\t  {\n\t\t\t    nt.removeChild(_notificationElm);\n\t\t\t    _notificationElm = null;\n\t\t\t  }\n\t\t\t  else\n\t\t\t  {\n\t\t\t    nt.innerHTML = \"\";\n\t\t\t  }\n\t\t\t}\n\t\t}\n\t\tPopup.setNotification= function(elm)\n\t\t{\n\t\t\tvar nt = elmNotificationArea;\n\t\t\tif(nt)\n\t\t\t{\n\n\t\t\t  if(_notificationElm)\n\t\t\t  {\n\t\t\t    nt.removeChild(_notificationElm);\n\t\t\t    _notificationElm = null;\n\t\t\t  }\n\t\t\t  else\n\t\t\t  {\n\t\t\t    nt.innerHTML = \"\";\n\t\t\t  }\n\n\t\t\t  if(typeof elm == 'string')\n\t\t\t  {\n\t\t\t     nt.innerHTML = elm;\n\t\t\t  }\n\t\t\t  else if (typeof elm == 'object')\n\t\t\t  {\n\t\t\t    _notificationElm = elm;\n\t\t\t    nt.addELM(elm)\n\t\t\t  }\n\t\t\t}\n\t\t}\n\t\tPopup.getTitle = function(){\n\t\t\treturn elmContent.value;\n\t\t}\n\t\tPopup.init = function(c,cParams)\n\t\t{\n\t\t\tvar additionalCSS = null;\n\n\t\t\t//console.log(c);\n\t\t\t//console.log(_content);\n\n\t\t\tPopup.clearContent();\n\t\t\t_content = c;\n\t\t\t_cParams = cParams;\n\t\t\t\n\t\t\tif(typeof cParams == 'string')\n\t\t\t{\n\n\t\t\t\telm.addELM(_content);\n\n\t\t\t\tadditionalCSS = cParams;\n\t\t\t\tif(additionalCSS)\n\t\t\t\t{\n\t\t\t\t\tPopup.setClass(additionalCSS)\n\t\t\t\t}\n\n\t\t\t}\n\t\t\telse if (typeof cParams == 'object')\n\t\t\t{\n\t\n\t\t\t\tif(cParams.title)\n\t\t\t\t{\n\t\t\t\t\t//elmHeaderTitle.value = cParams.title;\n\t\t\t\t\telmHeaderTitle.innerHTML = cParams.title;\n\t\t\t\t}\n\n\t\t\t\tif(_params)\n\t\t\t\t\telmContent.addELM(_content);\n\t\t\t\telse\n\t\t\t\t\telm.addELM(_content);\n\n\t\t\t\tif(cParams.css)\n\t\t\t\t\tPopup.setClass(cParams.css)\n\n\n\t\t\t\t/*\n\t\t\t\tif(cParams.editable)\n\t\t\t\t\telmHeaderTitle.readOnly = false;\n\t\t\t\t*/\n\n\t\t\t\telm.addEventListener(\"click\", function(e) {\n\t\t\t\t\tif (!e) var e = window.event;\n\t\t        \te.cancelBubble = true;\n\t\t    \t\tif (e.stopPropagation) e.stopPropagation();\n\n\n\t\t\t\t});\t\t\n\n\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\telm.addELM(_content);\n\n\t\t\t\tadditionalCSS = cParams;\n\t\t\t\tif(additionalCSS)\n\t\t\t\t{\n\t\t\t\t\tPopup.setClass(additionalCSS)\n\t\t\t\t}\n\t\t\t}\n\n\n\t\t\n\n\n\t\t\tif(_content.hasOwnProperty('getELM'))\n\t\t\t{\n\t\t\t\t_content.getELM().addEventListener(\"click\", function(e) {\n\t\t\t\t\tif (!e) var e = window.event;\n\t\t        \te.cancelBubble = true;\n\t\t    \t\tif (e.stopPropagation) e.stopPropagation();\n\t\t\t\t});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\t_content.addEventListener(\"click\", function(e) {\n\t\t\t\t\tif (!e) var e = window.event;\n\t\t        \te.cancelBubble = true;\n\t\t    \t\tif (e.stopPropagation) e.stopPropagation();\n\t\t\t\t});\t\t\t\t\n\t\t\t}\n\t\t\t\n\n\n\t\t}\n\t\tPopup.isShown = function()\n\t\t{\n\t\t\treturn elm.style.display == \"block\";\n\t\t}\n\t\tPopup.clearContent = function()\n\t\t{\n\t\t\t\n\t\t\tif(_content)\n\t\t\t{\n\t\t\t\tif(_content.getELM)\n\t\t\t\t{\n\t\t\t\t\tif(_content.getELM().parentNode)\n\t\t\t\t\t\t_content.getELM().parentNode.removeChild(_content.getELM());\t\t\t\t\t\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tif(_content.parentNode)\n\t\t\t\t\t\t_content.parentNode.removeChild(_content);\t\t\t\t\t\n\t\t\t\t}\n\t\t\t}\n\t\t\t_content = null;\n\n\t\t\telm.style.display = \"\";\n\n\n\t\t}\n\t\tPopup.hide = function(bool)\n\t\t{\n\n\t\t\tif(_content.hide)\n\t\t\t{\n\t\t\t\t_content.hide(function(){\n\t\t\t\t\telm.style.display = \"none\";\n\t\t\t\t\tapp.Controller.unlockWindow();\n\t\t\t\t});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\telm.style.display = \"none\";\n\t\t\t\tapp.Controller.unlockWindow();\n\t\t\t}\n\t\t\t\t\n\t\t}\n\t\tPopup.show = function(bool)\n\t\t{\n\t\t\tif(bool && elm.style.display == 'block')\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tbool = typeof bool === \"undefined\" ? true : bool;\n\t\t\telm.style.display = bool ? \"block\" : \"none\";\n\n\t\t\tif(_content)\n\t\t\t\tif(_content.show)\n\t\t\t\t\t_content.show(bool);\n\n\t\t\tif(bool)\n\t\t\t{\n\t\t\t\tif(typeof _cParams == 'object')\n\t\t\t\t{\n\t\t\t\t\tif(_cParams.history)\n\t\t\t\t\t{\n\t\t\t\t\t\tapp.Controller.pushPopup(_this,_cParams.history);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tapp.Controller.pushPopup(_this);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tapp.Controller.pushPopup(_this);\n\t\t\t\t}\n\t\n\t\t\t\t\n\n\n\t\t\t\tapp.Controller.lockWindow();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\telm.style.display = \"none\";\n\t\t\t\tapp.Controller.unlockWindow();\n\t\t\t}\n\t\t}\n\n\t\tPopup.getHTML = function()\n\t\t{\n\n\t\t\t\n\n\t\t\treturn elm;\n\t\t}\n\n\n\treturn Popup;\n}});\n","app.Ext(app,{DAL:{\n//--DAL UTIL\n    getObjectFromParse:function(parseObj)\n    {\n        var obj = parseObj.attributes;\n        obj.objectId = parseObj.id;\n        return(obj);\n    },   \n    setParseObject:function(parseObj,obj)\n    {\n        for(var k in obj)\n        {\n            parseObj.set(k,obj[k]);\n        }\n    },\n    loginSocial:function(type)\n    {\n\n    },\n    login:function(email,password,success,error)\n    {\n      if(email)\n        email = email.toLowerCase();\n\n      Parse.User.logIn(email, password, {\n        success: function(user) {\n          // Do stuff after successful login.\n\n\n          Parse.Cloud.run('checkRole', {}, {\n          success: function(result) {\n            success(user);\n          },\n          error: function(er) {\n            error(er);\n          }\n          });\n\n\n        },\n        error: function(user, er) {\n          // The login failed. Check error to see why.\n          error(er);\n        }\n      });\n    },\n    logout:function()\n    {\n      setCookie('username', \"\", 325);\n      setCookie('userId', \"\", 325);\n      setCookie('session_token', \"\", 325);\n\n      Parse.User.logOut();\n    },\n    signUp:function(email,password,success,error)\n    {\n        var pw = password;\n        var em = email;\n        if(em)\n          em = em.toLowerCase();\n\n\n        var user = new Parse.User();\n        user.set(\"username\", em);\n        user.set(\"password\", pw);\n        user.set(\"email\", em);\n\n        var ep = em.split('@');\n        user.set(\"fullname\",ep[0]);\n\n        console.log(ep[0]);\n         \n        user.signUp(null, {\n          success: function(user) {\n            // Hooray! Let them use the app now.\n\n            Parse.Cloud.run('checkRole', {}, {\n            success: function(result) {\n              success(user);\n            },\n            error: function(er) {\n              error(er);\n            }\n            });\n\n            \n\n          },\n          error: function(user, er) {\n           \n            error(er);\n          }\n        });\n    }    \n\n}});\n","/*\nThe MIT License (MIT)\nCopyright (c) 2015 Aaron Rau\n\nPermission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:\nThe above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n*/\n(function () {\n  \"use strict\";\n\n  var _doc = document;\n  var _getElmById = function(id){\n    return _doc.getElementById(id);\n  }\n  var _getElmByClass = function(className){\n    return _doc.getElementsByClassName(className)\n  };\n\n  var HOST = \"\";\n  var SECTION_PATH = \"/scripts/sections/\";\n  var MODULE_PATH = \"/scripts/modules/\";\n  var CSS_PATH = \"/css/\"\n\n  //private variables\n  var _windowPosition = [],\n      _popupStacks = [],\n      _sectionParams = {},\n      _currentSection = null,\n      _sections = {},\n      _modules ={}\n\n  var _SectionNavButtons = {};\n  var _SectionNavBadges = {};\n  var _notificationElm = null;\n  var _featureFlags = {};\n\n  //private function\n  var _loadSection = function(sName){\n\n\n      if(IsEmpty(sName))\n        return\n\n      var container = _getElmById('scroll_content');\n\n      var defaultPath = SECTION_PATH+sName+\".js\";\n\n      if(_sectionParams[sName])\n      if(_sectionParams[sName].host)\n        defaultPath = _sectionParams[sName].host + SECTION_PATH+sName+\".js\";\n\n\n      var titleArea = null;\n      var hs = _getElmByClass('controls_header');\n      if(hs)\n      {\n        if(hs.length > 0)\n        {\n          hs[0].className = 'controls_header '+ sName+'_header'\n          var ht = hs[0].querySelector('#header_title');\n          if(ht)\n          {\n            ht.innerHTML = '';\n            var param = _sectionParams[sName];\n            if(param)\n              if(param.title)\n              {\n                ht.innerHTML = param.title;\n                titleArea = ht;\n              }\n          }\n\n        }\n      }\n      \n      var buttonId = 'bt' + sName.toTitleCase();\n      var badge = _SectionNavBadges[buttonId];\n\n\n      var _renderSection = function(sName){\n\n        require([SECTION_PATH+sName+\".js\"], function(section) {\n\n            \n            _sections[sName] = section;\n            section.init(app.User.isLogin(),container,titleArea,badge);          \n            section.render();\n\n            _currentSection = _sections[sName];\n        },function(err){\n          //console.log(sName);\n          console.log(err);\n          _currentSection = null;\n        }); \n        \n      }\n\n\n\n      if(!app.Mod(sName))\n      {\n        console.log('no modules found');\n        LoadCSS(CSS_PATH+sName+'.css');\n        app.RegMods([sName],function(){\n            _renderSection(sName);\n        })\n      }\n      else\n      {\n        _renderSection(sName);\n      }\n\n\n\n           \n  }\n\n\n\n  app.Ext(app, {\n    //module registration\n    Mod:function(sName)\n    {\n      return _modules[sName];\n    },\n    RegMod:function(name,mod)\n    {\n      if(_modules[name])\n        return mod\n\n      _modules[name] = mod;\n    },\n    RegMods:function(names,callback)\n    {\n\n      var paths = [];\n      var moduleNames = names;\n      for(var i = 0; i < moduleNames.length; i++)\n      {\n        var mName = moduleNames[i];\n        if(!app.Mod(mName))\n        {\n          var defaultPath = MODULE_PATH+mName+\".js\";\n          if(_sectionParams[mName])\n          if(_sectionParams[mName].host)\n            defaultPath = _sectionParams[mName].host + MODULE_PATH+mName+\".js\";\n\n          paths.push(defaultPath);\n        }          \n      }\n\n      if(paths.length > 0)\n      {\n        require(paths, function() {\n         \n          for(var i = 0; i < arguments.length; i++)\n          {\n            app.RegMod(moduleNames[i],arguments[i])\n          }\n          \n          callback(paths);\n        \n        },function(err){\n          console.log(err);\n          callback(null);\n\n        });\n      }\n\n    },\n    Bind:function(module,componentsNames,objects)\n    {\n      /*\n      @aaronrau: different name spaces and 2 deep name space are not supported right now such as \n        [\"namespace_a.component\",\"namespace_b.component\",\"namespace_a.sub_namespace_a.component\"]\n      \n      */\n\n        for(var n in objects)\n        {\n          var i = parseInt(n);\n          if(isNaN(i))\n            continue;\n          \n          var uicomponent = objects[n];\n          var paths = componentsNames[n].split('/');\n          var names = paths[paths.length-1].split('.');\n          var name = names[1].toTitleCase();\n          var moduleName = names[0].toLowerCase();\n          \n          if(names[1] == 'DAL')\n            name = 'DAL';\n\n          //console.log(name);\n          if(!app.Mod(moduleName) && names.length == 2)\n            app.RegMod(moduleName,uicomponent);\n          \n          var ext = {}; ext[name] = uicomponent;\n          app.Ext(module,ext);\n        }\n\n      \n\n\n    },\n    User:{\n      get:function()\n      {\n        return Parse.User.current();\n      },\n      become:function(token,error){\n\n        if(IsEmpty(error))\n        {\n\n          Parse.User.become(token).then(function(result){\n            \n            var currentUser = Parse.User.current();\n            onLoginSuccess(currentUser);\n            \n          });\n\n        }\n        else\n        {\n          alert(error);\n          //document.getElementsByClassName('')\n        }\n\n      },\n      isLogin:function()\n      {     \n        var currentUser = Parse.User.current(); \n        return currentUser ? currentUser : false;\n      },\n      login:function(callback){\n        //todo\n      },\n      logout:function(callback){\n\n        app.DAL.logout();\n\n        setTimeout(function() {\n          if(callback)\n            callback();\n          else\n            location.reload();\n        }, 800);\n\n      }\n    },\n    Controller: {\n      sectionBadges:null,\n      checkFeature:function(feature_flag)\n      {\n        return _featureFlags[feature_flag];\n      },\n      setFeatureFlags:function(flags)\n      {\n        _featureFlags = flags;\n      },\n      lockWindow: function() {\n        _windowPosition = [\n          self.pageXOffset || document.documentElement.scrollLeft || document.body.scrollLeft,\n          self.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop\n        ];\n        var html = document.getElementsByTagName('html')[0]; // it would make more sense to apply this to body, but IE7 won't have that\n        html.data = {};\n        html.data['scroll-position'] = _windowPosition;\n        html.data['previous-overflow'] =  html.style.overflow;\n        html.style.overflow = 'hidden';\n        window.scrollTo(_windowPosition[0], _windowPosition[1]);\n      },\n      unlockWindow: function() {\n        // un-lock scroll position\n        var html = document.getElementsByTagName('html')[0];\n        var scrollPosition = html.data['scroll-position'];\n        html.style.overflow = html.data['previous-overflow'];\n        window.scrollTo(scrollPosition[0], scrollPosition[1]);\n      },\n      clearNotification:function(){\n        var nt = document.getElementById('notification');\n        if(nt)\n        {\n          if(_notificationElm)\n          {\n            nt.removeChild(_notificationElm);\n            _notificationElm = null;\n          }\n          else\n          {\n            nt.innerHTML = \"\";\n          }\n        }\n      },\n      setNotification:function(elm)\n      {\n        \n\n        var nt = document.getElementById('notification');\n        if(nt)\n        {\n\n          if(_notificationElm)\n          {\n            nt.removeChild(_notificationElm);\n            _notificationElm = null;\n          }\n          else\n          {\n            nt.innerHTML = \"\";\n          }\n\n          if(typeof elm == 'string')\n          {\n             nt.innerHTML = elm;\n          }\n          else if (typeof elm == 'object')\n          {\n            _notificationElm = elm;\n            nt.addELM(elm)\n          }\n        }\n      },\n      closePopovers:function(e)\n      {\n        if(app.controls.expandButtons)\n        for(var i = 0; i < app.controls.expandButtons.length; i++)\n        {\n          var item = app.controls.expandButtons[i];\n          if(item.style.display != 'none')\n            item.style.display = 'none';\n        }\n      },\n      pushPopup:function(popup,path)\n      {\n        _popupStacks.push(popup);\n\n        //console.log(history.length);\n\n        //console.log(path);\n\n        var r = Math.random();\n        var state ={\"objectHash\":r};\n        \n        //if(event.state)\n\n\n        if(window.location.pathname == path)\n        {\n          var p = path.split('/');\n          window.history.replaceState(state, r, '/'+p[1]);\n        }\n      \n        window.history.pushState(state, r, path);     \n        \n   \n        window.onpopstate = function(event) {\n\n          //console.log(history.length);\n          /*\n          if(event.state) // AR: needed for safari\n          {\n            var p = _popupStacks.pop();\n            if(p)\n            {\n              p.hide();\n            } \n          }*/\n        \n          var p = _popupStacks.pop();\n          if(p)\n          {\n            p.hide();\n          } \n\n        }\n\n        \n      },\n      popPopup:function()\n      {\n        window.history.back();\n      },\n      //TODO: http://spoiledmilk.com/blog/html5-changing-the-browser-url-without-refreshing-page/\n      initSectionSelections: function(sectionNames) {\n\n        window.onscroll = function(e)\n        { \n          app.Controller.closePopovers(e);\n        }\n\n        _sectionParams = sectionNames;\n        _sections = {};\n\n        var fs = _getElmByClass('controls_footer');\n        var footer = null;\n        if(fs)\n          footer = fs[0];\n        \n        if(footer)\n        {\n          footer.innerHTML = '';\n          var ul = cELM('ul');\n          footer.addELM(ul);\n\n          //console.log(sectionNames);\n          //build footer controls\n          for (var section in _sectionParams) {\n          \n            _sections[section] = null;\n\n            var buttonId = 'bt' + section.toTitleCase();\n\n            var w = cELM('li');\n            var anc = cELM('a');\n            var bt = cELM('div','button '+buttonId);\n            anc.addELM(bt);\n            anc.value = buttonId;\n            anc.section = section;\n            anc.onclick = function(e) {\n                var url = document.location.href;\n\n\n\n                if (window.history.pushState) {\n                  // supported.\n                  window.history.pushState(this.section, \"\", \"/\"+this.section);\n                }\n                else\n                {\n                  var base = url.indexOf('#') > -1 ? url.split('#')[0] : document.location.href;\n                  var part = this.value.substr(2, this.value.length - 2).toLowerCase();\n                  document.location.href = base + \"#\" + part;\n\n                }\n               \n                app.Controller.showSection();\n              }\n\n            w.addELM(anc);\n            \n            if(_sectionParams[section].hasBadge)\n            {\n              var badge = cELM('div','badge badge'+section.toTitleCase());\n              anc.addELM(badge);\n              _SectionNavBadges[buttonId] = badge;\n\n              if(_CTRL().sectionBadges)\n              {\n                  if(_CTRL().sectionBadges[section])\n                    badge.innerHTML = _CTRL().sectionBadges[section];\n              }\n            }\n\n            ul.addELM(w);\n\n            _SectionNavButtons[buttonId] = bt;\n\n\n          }\n        }\n       \n      },\n      showSection: function(initSectionName) {\n        \n        var loc = document.location.toString();\n        if(loc.indexOf('/auth/') >-1 ||\n          loc.indexOf('/login') >-1 ||\n          loc.toString().indexOf('/signup') >-1)\n          return;\n\n        var paths = [] \n        if(window.history.pushState)\n        {\n          paths = getURLParts(document.location);\n        }\n        else\n        {\n          paths = getURLHashPath(document.location);\n        }\n        var sName = \"\";\n\n        if(initSectionName)\n          sName = initSectionName;\n        else\n        {\n          //update buttons and path\n          if (paths.length > 0) {\n            var part = paths[0];\n            sName = part;\n          }\n          else { //show first one\n            for (var sn in _sections) {\n              sName = sn;\n            \n\n              if(window.history.pushState)\n              {\n                window.history.pushState(sName, \"\", \"/\"+sName);\n              }\n              else\n              {\n                document.location.href = document.location.href + '#' + sName;\n              }\n\n              break;\n            }\n          }\n        }\n\n\n\n        var csec = _currentSection;\n        if(csec)\n          if(csec.clear)\n            csec.clear();\n\n        //select current button\n        for(var bId in _SectionNavButtons)\n        {\n          var bt = _SectionNavButtons[bId];\n          bt.className = 'button ' + bId;\n        }\n\n\n        var bId = 'bt' + sName.toTitleCase();\n        if (_SectionNavButtons[bId]) {\n          var bt = _SectionNavButtons[bId];\n          if (bt) {\n            bt.className = 'button ' + bId + \"_selected\";\n          }\n        }\n\n        var hs = _getElmByClass('controls_header');\n        if(hs)\n        {\n          if(hs.length > 0)\n          {\n            hs[0].className = 'controls_header '+ sName+'_header'\n            var ht = hs[0].querySelector('#header_title');\n            if(ht)\n            {\n              ht.innerHTML = '';\n              var param = _sectionParams[sName];\n              if(param)\n                if(param.title)\n                {\n                  ht.innerHTML = param.title;\n                }\n            }\n\n          }\n        }\n\n        var sec = _sections[sName];\n        if (sec) {\n          sec.render();\n          _currentSection = _sections[sName];\n\n        }\n        else\n        {\n          var param = _sectionParams[sName];\n\n          if(param)\n          if(param.mods)\n          if(param.mods.length > 0)\n            return app.RegMods(param.mods,function(){\n              if(param.css)\n                LoadCSS(param.css);\n              //load section from JS TODO: might have to add a loading sign if this is too slow;\n              _loadSection(sName);\n            })\n          \n\n          return _loadSection(sName);\n          \n        }\n\n\n\n\n      }\n    }\n\n  });\n\n}());\n","/*\nThe MIT License (MIT)\nCopyright (c) 2015 Aaron Rau\n\nPermission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:\nThe above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n*/\n\napp.Ext(app,{Login:function(params,callback){\n\t\tvar Login ={}\n\n\t\tvar completeLogin = callback;\n\n\t\t//Private Property\n\t\tvar _data = {};\n\t\tvar _params = null;\n\t\tvar _mode = 'login'; // login\n\t\tvar _isOAuthOnly = false;\n\t\tvar elm = cELM('div','login');\n\n\n\t\tif(typeof params === 'object')\n\t\t{\n\t\t\tif(params.mode)\n\t\t\t\t_mode = params.mode;\n\n\t\t\tif(params.isOAuthOnly)\n\t\t\t\t_isOAuthOnly = params.isOAuthOnly;\n\n\t\t\t_params = params;\n\n\t\t}\n\t\telse if(typeof params === 'string')\n\t\t{\n\t\t\t_mode = params; // type\n\t\t}\n\n\t\tvar onLoginSignUp = function(e)\n\t\t{\n\t\t\tmsgArea.innerHTML = \"\";\n\t\t\t\n\t\t\tvar p = window.location.href;\n\t\t\tif(p.indexOf('/auth/') == -1 \n\t\t\t\t&& p.indexOf('/login') == -1 \n\t\t\t\t&& p.indexOf('/signup') == -1)\n\t\t\t\tsetCookie('lastLoginPath',p,325);\n\t\t\telse\n\t\t\t\tsetCookie('lastLoginPath',null,325);\n\t\t}\n\n\n\t\tvar txtUsername = cELM('INPUT');\n\t\ttxtUsername.id = \"txtUsername\";\n\t\ttxtUsername.setAttribute(\"type\", \"text\");\n\t\ttxtUsername.setAttribute(\"placeholder\", \"Email\");\n\n\t\tvar txtPassword = cELM('INPUT');\n\t\ttxtPassword.id = \"txtPassword\";\n\t\ttxtPassword.setAttribute(\"type\", \"password\");\n\t\ttxtPassword.setAttribute(\"placeholder\", \"Password\");\n\n\t\tvar txtFullname = cELM('INPUT');\n\t\ttxtFullname.setAttribute(\"type\", \"text\");\n\t\ttxtFullname.setAttribute(\"placeholder\", \"Name\");\n\t\ttxtFullname.style.display = 'none';\n\n\n\t\tvar txtTitle = cELM('DIV','txtTitle');\n\t\tvar txtNote = cELM('DIV','txtNote');\n\n\t\tvar msgArea = cELM('DIV','error_message');\n\t\n\t\tvar btForgot = cELM('DIV','textButton');\n\t\tbtForgot.id = \"btForgot\";\n\t\tbtForgot.innerHTML = \"Forgot your password?\"\n\n\t\tvar btSwitch = cELM('DIV','textButton');\n\t\tbtSwitch.id = \"btSwitch\";\n\n\t\tvar btAction = cELM('DIV','button');\n\t\tbtAction.id = \"btAction\";\n\n\t\tvar aSocialLogin = cELM('DIV','social');\n\n\n\t\tvar btGmail = cELM('a','button');\n\t\tbtGmail.id = \"btGmailLogin\";\n\t\tbtGmail.onclick = function(e)\n\t\t{\n\t\t\tonLoginSignUp();\n\n\t\t\tLogin.show(false);\n\n\t\t\tsetTimeout(function(){\n\t\t\t\tlocation.href = '/auth/google';\n\t\t\t},200)\n\t\t}\n\n\t\tvar btFacebook = cELM('a','button');\n\t\tbtFacebook.id = \"btFacebookLogin\";\n\t\t//btFacebook.href = '/auth/facebook';\n\t\tbtFacebook.onclick = function(e)\n\t\t{\n\n\t\t\tonLoginSignUp();\n\n\t\t\tLogin.show(false);\n\n\t\t\tsetTimeout(function(){\n\t\t\t\tlocation.href = '/auth/facebook';\n\t\t\t},200)\n\t\t}\n\t\tvar btTwitter = cELM('a','button');\n\t\tbtTwitter.id = \"btTwitterLogin\";\n\t\t//btTwitter.href = '/auth/twitter';\n\t\tbtTwitter.onclick = function(e)\n\t\t{\n\t\t\tonLoginSignUp();\n\n\t\t\tLogin.show(false);\n\t\t\tsetTimeout(function(){\n\t\t\t\tlocation.href = '/auth/twitter';\n\t\t\t},200)\n\t\t}\n\n\t\tbtFacebook.innerHTML = \"with Facebook\";\n\t\tbtTwitter.innerHTML = \"with Twitter\";\n\t\tbtGmail.innerHTML = \"with Google\"\n\n\t\tvar swithMode = function(m)\n\t\t{\n\t\t\t_mode = m;\n\t\t\ttxtNote.innerHTML = \"\";\n\t\t\tmsgArea.innerHTML = \"\";\n\t\t\ttxtUsername.style.visibility = 'visible';\n\n \t\t\tif(_mode == \"forgot\")\n\t\t\t{\n\t\t\t\taSocialLogin.style.display ='none';\n\n\t\t\t\telm.className = \"login forgot\";\n\n\t\t\t\ttxtTitle.innerHTML = \"Reset Password\";\n\t\t\t\tmode = \"forgot\";\n\t\t\t\tbtAction.innerHTML = 'Reset Password';\n\t\t\t\tbtSwitch.innerHTML = 'or login';\n\t\t\t\tbtForgot.style.visibility = 'hidden';\n\t\t\t\tbtForgot.style.display = 'none';\n\t\t\t\ttxtPassword.style.visibility = 'hidden';\n\t\t\t}\n\t\t\telse if(_mode == \"login\")\n\t\t\t{\n\t\t\t\t\n\t\t\t\taSocialLogin.style.display ='block';\n\n\t\t\t\telm.className = \"login\";\n\n\t\t\t\ttxtTitle.innerHTML = \"Please Login\";\n\t\t\t\t_mode = \"login\";\n\t\t\t\tbtAction.innerHTML = 'Login';\n\t\t\t\tbtSwitch.innerHTML = 'or signup now';\n\t\t\t\tbtForgot.style.visibility = 'visible';\n\n\t\t\t\tbtForgot.style.display = 'block';\n\t\t\t\ttxtPassword.style.visibility = 'visible';\n\t\t\t\tLogin.showControls(true);\n\n\n\t\t\t}\n\t\t\telse if(_mode == \"signup\")\n\t\t\t{\n\t\t\t\taSocialLogin.style.display ='block';\n\n\t\t\t\telm.className = \"login signup\";\n\t\t\t\ttxtTitle.innerHTML = \"Please Sign Up\";\n\t\t\t\t_mode = \"signup\";\n\t\t\t\tbtAction.innerHTML = 'Signup';\n\t\t\t\tbtSwitch.innerHTML = 'or login';\n\t\t\t\tbtForgot.style.display = 'none';\n\t\t\t\ttxtPassword.style.visibility = 'visible';\n\t\t\t\tLogin.showControls(true);\n\t\t\t\n\t\t\t\ttxtFullname.style.display = 'block';\n\n\t\t\t}\n\t\t\telse if(_mode == \"change\")\n\t\t\t{\n\t\t\t\t\n\t\t\t}\n\t\t\t\n\n\t\t}\n\n\t\tbtForgot.onclick = function(e)\n\t\t{\n\t\t\tswithMode(\"forgot\");\n\t\t}\n\n\t\tbtAction.onclick = function(e)\n\t\t{\n\t\t\tLogin.loginOrSignup();\n\t\t}\n\t\tbtSwitch.onclick = function(e)\n\t\t{\n\t\t\tif(_mode == \"signup\")\n\t\t\t{\n\t\t\t\tswithMode(\"login\");\n\t\t\t}\n\t\t\telse if(_mode ==\"login\")\n\t\t\t{\n\t\t\t\tswithMode(\"signup\");\n\t\t\t}\n\t\t\telse if(_mode ==\"forgot\")\n\t\t\t{\n\t\t\t\tswithMode(\"login\");\n\t\t\t}\n\t\t\t\n\t\t}\n\n\t    window.addEventListener(\"keypress\", function(e) {\n\t    \n\t      if(e.keyCode == 13) \n\t      {\n\t        Login.loginOrSignup();\n\t      }\n\t    }, false);\n\n\t\tLogin.showControls = function(isShow)\n\t\t{\n\t\t\tif(isShow)\n\t\t\t{\n\t\t\t\tbtAction.style.visibility = 'visible';\n\t\t\t\tbtSwitch.style.visibility = 'visible';\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tbtAction.style.visibility = 'hidden';\n\t\t\t\tbtSwitch.style.visibility = 'hidden';\n\t\t\t}\n\t\t}\n\t\tLogin.show = function(isShow)\n\t\t{\n\t\t\telm.style.display = isShow ? 'block' : 'none';\n\t\t}\n\t\tLogin.loginOrSignup = function()\n\t\t{\n\t\t\tLogin.showControls(false);\n\t\t\t\n\n\t\t\tvar hideControls = function(){\n\t\t\t\ttxtUsername.style.display = 'none';\n\t\t\t\ttxtPassword.style.display = 'none';\n\t\t\t\tbtForgot.style.visibility = 'hidden';\n\t\t\t\taSocialLogin.style.display ='none';\n\t\t\t}\n\n\n\t\t\tvar showControls = function(){\n\t\t\t\ttxtUsername.style.display = 'block';\n\t\t\t\ttxtPassword.style.display = 'block';\n\t\t\t\tif(_mode != 'forgot')\n\t\t\t\t\tbtForgot.style.visibility = 'block';\n\n\t\t\t\taSocialLogin.style.display ='block';\n\t\t\t}\n\n\t\t\thideControls();\n\t\t\tif(_mode == \"signup\")\n\t\t\t{\n\t\t\t\tonLoginSignUp();\n\n\t\t\t\ttxtTitle.innerHTML = \"Signing up </br> </br> Please wait...\";\n\n\t\t\t\tapp.DAL.signUp(txtUsername.value,txtPassword.value,\n\t\t\t\tfunction(user){\n\t\t\t\t\tcompleteLogin(user);\n\t\t\t\t},\n\t\t\t\tfunction(error){\n\t\t\t\t\tshowControls();\n\t\t\t\t\tLogin.error(error);\n\t\t\t\t});\n\t\t\t}\n\t\t\telse if (_mode == \"login\")\n\t\t\t{\n\t\t\t\tonLoginSignUp();\n\n\t\t\t\ttxtTitle.innerHTML = \"Logging in </br></br> Please wait...\";\n\n\n\t\t\t\tapp.DAL.login(txtUsername.value,txtPassword.value,\n\t\t\t\tfunction(user){\n\t\t\t\t\tcompleteLogin(user);\n\t\t\t\t},\n\t\t\t\tfunction(error){\n\t\t\t\t\tshowControls();\n\t\t\t\t\tLogin.error(error);\n\t\t\t\t});\n\t\t\t}\n\t\t\telse if (_mode == \"forgot\")\n\t\t\t{\n\t\t\t\ttxtTitle.innerHTML = \"Resetting Password...\";\n\t\t\t\ttxtUsername.style.visibility = 'hidden';\n\n\t\t\t\tsetTimeout(function(){\n\t\t\t\t\ttxtTitle.innerHTML = \"Password Reset\";\n\t\t\t\t\ttxtNote.innerHTML = \"An email was sent with a link to create a new password. <br/>Don't forget to check your spam folder, if you don't see the email\";\n\t\t\t\t\t_mode = \"signup\";\n\t\t\t\t\tbtSwitch.innerHTML = \"Login\";\n\t\t\t\t\tbtSwitch.style.visibility = 'visible';\n\t\t\t\t\t\n\t\t\t\t\ttxtPassword.style.visibility = 'hidden';\n\n\t\t\t\t},1000)\n\n\t\t\t}\n\t\t}\n\n\t\tLogin.error = function(error)\n\t\t{\n\t\t\tswithMode(_mode);\n\t\t\tLogin.showControls(true);\n\t\t\tmsgArea.innerHTML = error.code + \" \" + error.message;\n\t\t}\n\t\tLogin.getELM = function()\n\t\t{\n\t\t\treturn elm;\n\t\t}\n\t\tLogin.getHTML = function()\n\t\t{\n\n\n\t\t\telm.addELM(txtTitle);\n\n\t\t\tif(_params)\n\t\t\t{\n\t\t\t\tif(_params.google)\n\t\t\t\t\taSocialLogin.addELM(btGmail);\n\t\t\t\t\n\t\t\t\tif(_params.facebook)\n\t\t\t\t\taSocialLogin.addELM(btFacebook);\n\t\t\t\t\n\t\t\t\tif(_params.twitter)\n\t\t\t\t\taSocialLogin.addELM(btTwitter);\n\n\t\t\t\tif(_params.google || _params.facebook || _params.twitter)\n\t\t\t\t{\n\t\t\t\t\tvar or = cELM('DIV','loginor');\n\t\t\t\t\tor.innerHTML = 'or'\n\t\t\t\t\tif(!_isOAuthOnly)\n\t\t\t\t\t\taSocialLogin.addELM(or);\n\n\t\t\t\t\telm.addELM(aSocialLogin);\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\telm.addELM(txtNote);\n\t\t\tvar c = cELM('DIV','');\n\n\t\t\tif(!_isOAuthOnly)\n\t\t\t{\n\n\t\t\t\tif(_params)\n\t\t\t\t\tif(_params.hasName)\n\t\t\t\t\t\tc.addELM(txtFullname);\n\t\t\t\t\n\t\t\t\tc.addELM(txtUsername);\n\t\t\t\tc.addELM(txtPassword);\n\t\t\t\tc.addELM(btForgot);\n\n\n\t\t\t\t\n\t\t\t\tc.addELM(btAction);\n\t\t\t\tc.addELM(btSwitch);\n\t\t\t\t\n\t\t\t\telm.addELM(c);\n\n\t\t\t}\n\n\t\t\telm.addELM(msgArea);\n\n\t\t\tswithMode(_mode);\n\n\t\t\treturn elm;\n\t\t}\n\n\n\treturn Login;\n}});\n","app.Ext(app,{controls:{\n/*--------------------*/\n\n/*Converts a bunch of input to a data model*/\nSelections:function(config)\n{\n/*\n\n\tgetData:function()\n\tfinishedSelection:function()\n\taddData; function(text,_selectionSessionData,function(newItem){}) // //selections that you can add to //\n\tsearchData;function(text,_selectionSessionData,function(results))// selections you can search with\n\tonShow;\n\tonDone;\n\tonSelect;\n\tonFocus;\n\tonBlur;\n\tonFilter;\n\tonSelect;\n\titemTemplate\n\tfooter\n\n\tsetSessionData()\n\n\t[]\n*/\n\n/*------Selection Control Sub components --------------*/\n\tvar SelectionHeader = function(config){\n\t\tvar _this = this;\n\t\tvar _onAdd = config.onAdd;\n\t\tvar _onFocus = config.onFocus;\n\t\tvar _onBlur = config.onBlur;\n\t\tvar _onKeyup = config.onKeyup\n\n\t\tvar elm = cELM('div','selection_header');\n\t\tvar loading = cELM('div','loading');\n\n\t\tvar input = cELM('input','input_text');\n\t\tvar btAdd = cELM('div','button btAdd');\n\t\tvar btOK = cELM('div','button btOK');\n\t\tbtOK.style.display = 'none';\n\n\t\tvar _completeAdd = function(results){\n\t\t\tinput.readOnly = false;\n\n\t\t\tinput.style.display = \"block\";\n\t\t\tbtOK.style.display = 'none';\n\t\t\tbtAdd.style.display = 'block';\n\n\t\t\tif(results)\n\t\t\t{\n\t\t\t\tinput.value = \"\";\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\t//error\n\t\t\t}\n\t\t}\n\n\t\tvar _start = function()\n\t\t{\n\t\t\tbtAdd.style.display = 'none';\n\t\t\tbtOK.style.display = 'block';\n\t\t}\n\n\t\tvar _adding = function()\n\t\t{\n\t\t\tinput.blur();\n\t\t\tinput.style.display = \"none\";\n\t\t\tbtOK.style.display = 'none';\n\t\t\tbtAdd.style.display = 'none';\n\t\t}\n\n\t\t\n\t\tbtAdd.onclick = function(e)\n\t\t{\n\t\t\tinput.focus();\n\t\t}\n\n\t\t\n\t\tbtOK.onclick = function(event)\n\t\t{\n\t\t\t_adding();\n\t\t\t_onAdd(input.value,_completeAdd);\n\t\t}\n\n\t\tinput.onkeyup = function(e){\n\t\t\tif(_onKeyup)\n\t\t\t\t_onKeyup(input.value);\n\t\t}\n\t\tinput.onkeypress = function(e) {\n\t\t\tif(e.keyCode == 13) \n\t\t\t{\n\t\t\t\t_adding();\n\t\t\t\t_onAdd(input.value,_completeAdd);\n\t\t\t\t\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\t_start();\n\t\t\t}\n\t\t};\n\t\t_this.reset = function(e)\n\t\t{\n\t\t\tinput.value = \"\";\n\t\t\tinput.style.display = 'block';\n\t\t\tbtAdd.style.display = 'block';\n\t\t\tbtOK.style.display = 'none';\n\t\t\tinput.blur();\n\t\t}\n\n\t\tinput.onfocus=function(e){\n\t\t\tbtAdd.style.display = 'none';\n\t\t\tif(_onFocus)\n\t\t\t\t_onFocus();\n\t\t};\n\t\tinput.onblur = function(e)\n\t\t{\n\n\t\t\tif(_onBlur)\n\t\t\t\t_onBlur();\n\n\t\t\tif(!IsEmpty(input.value))\n\t\t\t{\n\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tinput.style.display = 'block';\n\t\t\t\tbtAdd.style.display = 'block';\t\t\t\n\t\t\t\tbtOK.style.display = 'none';\n\t\t\t}\n\t\t\t\n\t\t}\n\t\t_this.getELM = function()\n\t\t{\n\t\t\treturn elm;\n\t\t}\n\n\t\t_this.getHTML = function()\n\t\t{\n\t\t\telm.addELM(loading);\n\t\t\telm.addELM(input);\n\t\t\telm.addELM(btAdd);\n\t\t\telm.addELM(btOK);\n\n\t\t\treturn elm;\n\t\t}\n\n\t};\n\n\tvar SelectionSearchHeader = function(config){\n\t\tvar _this = this;\n\t\tvar _onSearch = config.onSearch;\n\t\tvar _onFocus = config.onFocus;\n\t\tvar _onBlur = config.onBlur;\n\t\tvar _onFilter = config.onFilter;\n\t\tvar _onKeyup = config.onKeyup;\n\n\t\tvar elm = cELM('div','selection_header selection_search');\n\t\tvar loading = cELM('div','loading');\n\n\t\tvar input = cELM('input','input_text');\n\t\tvar btSearch = cELM('div','button btSearch');\n\t\tvar btOK = cELM('div','button btOK');\n\t\tbtOK.style.display = 'none';\n\n\t\tvar isFirstFocus = false;\n\n\t\tvar _completeSearch = function(results){\n\t\t\tinput.readOnly = false;\n\n\t\t\t//input.style.display = \"block\";\n\t\t\t//btOK.style.display = 'none';\n\t\t\t//btSearch.style.display = 'block';\n\n\t\t\tif(results)\n\t\t\t{\n\t\t\t\t//input.value = \"\";\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\t//error\n\t\t\t}\n\t\t}\n\n\t\tvar _start = function()\n\t\t{\n\t\t\tbtSearch.style.display = 'none';\n\t\t\tbtOK.style.display = 'block';\n\t\t}\n\n\t\tvar _searching = function()\n\t\t{\n\t\t\tinput.blur();\n\t\t\t//input.style.display = \"none\";\n\t\t\t//btOK.style.display = 'none';\n\t\t\t//btSearch.style.display = 'none';\n\t\t}\n\n\t\t\n\t\tbtSearch.onclick = function(e)\n\t\t{\n\t\t\tinput.focus();\n\t\t}\n\n\t\t\n\t\tbtOK.onclick = function(event)\n\t\t{\n\t\t\t_searching();\n\t\t\t_onSearch(input.value,_completeSearch);\n\t\t}\n\n\t\tinput.onKeyup = function(e)\n\t\t{\n\t\t\tif(_onFilter)\n\t\t\t\t_onFilter(input.value);\n\t\t}\n\t\t\n\t\tinput.onkeypress = function(e) {\n\t\t\t\n\t\t\tif(e.keyCode == 13) \n\t\t\t{\n\t\t\t\t_searching();\n\t\t\t\t_onSearch(input.value,_completeSearch);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\t_start();\n\t\t\t}\n\t\t};\n\t\t\n\t\t_this.reset = function(e)\n\t\t{\n\t\t\tinput.value = \"\";\n\t\t\tinput.style.display = 'block';\n\t\t\tbtSearch.style.display = 'block';\n\t\t\tbtOK.style.display = 'none';\n\t\t\tinput.blur();\n\t\t}\n\t\tinput.onfocus=function(e){\n\t\t\tbtSearch.style.display = 'none';\n\t\t\tif(_onFocus)\n\t\t\t{\n\t\t\t\tif(!isFirstFocus)\n\t\t\t\t{\n\t\t\t\t\tisFirstFocus = true;\n\t\t\t\t\t_onFocus();\n\t\t\t\t}\n\t\t\t\t\t\n\t\t\t}\n\t\t\t\t\n\t\t};\n\n\t\tinput.onblur = function(e)\n\t\t{\n\n\t\t\tif(_onBlur)\n\t\t\t\t_onBlur();\n\n\t\t\tif(!IsEmpty(input.value))\n\t\t\t{\n\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\t//isFirstFocus = false;\n\t\t\t\tinput.style.display = 'block';\n\t\t\t\tbtSearch.style.display = 'block';\t\t\t\n\t\t\t\tbtOK.style.display = 'none';\n\t\t\t}\n\t\t\t\n\t\t}\n\n\t\t_this.getELM = function()\n\t\t{\n\t\t\treturn elm;\n\t\t}\n\n\t\t_this.getHTML = function()\n\t\t{\n\t\t\telm.addELM(loading);\n\t\t\telm.addELM(input);\n\t\t\telm.addELM(btSearch);\n\t\t\telm.addELM(btOK);\n\n\t\t\treturn elm;\n\t\t}\n\n\t};\n\n\tvar SelectionItem = function(data,params){\n\t\tvar _this = this;\n\t\tvar _data = data;\n\t\tvar _isSelect = data.isSelected;\n\t\tvar _template = params.template;\n\t\tvar _onSelect = params.onSelect;\n\n\n\t\tvar elm = cELM('div','selection');\n\t\t\n\t\t_this.update = function(data)\n\t\t{\n\t\t\t_data = data;\n\t\t\t_isSelect = data.isSelected;\n\n\t\t\telm.className = _isSelect ? \"selection selected\" : \"selection\";\n\t\t},\n\n\t\t_this.getData = function()\n\t\t{\n\t\t\treturn _data;\n\t\t}\n\n\t\t_this.getELM = function()\n\t\t{\n\t\t\treturn elm;\n\t\t}\n\n\t\t_this.getHTML = function()\n\t\t{\n\t\t\tif(_template)\n\t\t\t{\n\t\t\t\tvar result = _template(_data);\n\t\t\t\telm.innerHTML = result;\n\t\t\t}\n\t\t\t\n\t\t\t_this.update(_data);\n\n\n\t\t\treturn elm;\n\t\t}\n\n\t\t_this.select = function(isSelect,e)\n\t\t{\n\t\t\t_data.isSelected = isSelect;\n\t\t\t_this.update(_data);\n\n\t\t\t_onSelect(_isSelect,_data,e);\n\t\t}\n\n\t\tif(_data.onclick)\n\t\t\telm.onclick = _data.onclick\n\t\telse\t\n\t\t\telm.onclick = function(e)\n\t\t\t{\n\t\t\t\t_this.select(!_isSelect,e);\n\t\t\t}\n\n\t\treturn _this;\n\n\t}\n/*------Selection Control Logic Here --------------*/\n\tvar _this = this;\n\tvar _items = {};\n\tvar _config = config;\n\tvar _selectedItems = {};\n\tvar _unSelectedItems = {};\n\tvar _selectionSessionData = null;\n\n\t\n\tvar _getData = config.getData;\n\tvar _finishedSelection = config.finishedSelection;\n\tvar _addData = config.addData;\n\tvar _searchData = config.searchData;\n\tvar _onShow = config.onShow;\n\tvar _onDone = config.onDone;\n\tvar _onSelectHandler = config.onSelect;\n\tvar _onFocus = config.onFocus;\n\tvar _onBlur = config.onBlur;\n\tvar _onFilter = config.onFilter;\n\tvar _onSelect = cELM.onSelect;\n\n\tvar _footer = config.footer;\n\n\tvar _originalData = [];\n\n\tvar _itemTemplate = null;\n\tif(config.itemTemplate)\n\t\t_itemTemplate = config.itemTemplate;\n\n\n\tvar elm = cELM('div','selections');\n\tif(config.cssName)\n\t\telm = cELM('div','selections '+config.cssName);\n\n\n\t\n\tvar content = cELM('div','content');\n\tvar content_scroll = cELM('div','content_scroll');\n\n\tvar loadingSpinner = cELM('div','background_text');\n\tloadingSpinner.innerHTML = 'Loading...';\n\tloadingSpinner.style.display = 'block';\n\tcontent_scroll.addELM(loadingSpinner);\n\n\n\tvar plcHolder = cELM('div','placeholder_empty');\n\tif(_config.emptyMessage)\n\t{\n\t\tplcHolder.innerHTML = _config.emptyMessage;\n\t\tplcHolder.style.display = 'none';\n\t\tcontent_scroll.addELM(plcHolder);\n\t}\n\t\n\n\tvar addingElm = cELM('div','selection adding')\n\taddingElm.innerHTML = \"Adding ...\"\n\n\tvar btDone = cELM('div','btDone');\n\tbtDone.style.display = 'none';\n\tbtDone.onclick = function(e)\n\t{\n\t\t_this.onDone();\n\t}\n\n\t//updates the data without changing states\n\tvar _refreshData = function(data)\n\t{\n\t\tcontent.scrollTop = 0;\n\n\t\tfor(var id in _items)\n\t\t{\n\t\t\tvar item = _items[id];\n\n\t\t\titem.getELM().parentNode.removeChild(item.getELM());\n\t\t}\n\n\t\t_items = {};\n\n\t\tfor(var i = 0; i < data.length; i++)\n\t\t{\n\t\t\t_addEntry(data[i],false);\n\t\t}\n\n\t\tif(data.length == 0)\n\t\t{\n\t\t\tif(_config.emptyMessage)\n\t\t\t{\n\t\t\t\tloadingSpinner.style.display = \"none\";\n\t\t\t\tplcHolder.style.display = \"block\";\n\t\t\t}\t\t\t\n\t\t}\n\t}\n\n\tvar _addEntry = function(data,isInsert)\n\t{\n\t\tvar id = null;\n\t\tif(data.id)\n\t\t\tid = data.id\n\t\telse if(data._id)\n\t\t\tid = data._id\n\n\t\tif(!_items[id])\n\t\t{\n\t\t\tvar d = new SelectionItem(data,{\n\t\t\t\ttemplate:_itemTemplate,\n\t\t\t\tonSelect:_this.onSelect\n\t\t\t});\n\n\t\t\t_items[id] = d;\n\t\t\tif(isInsert)\n\t\t\t{\n\t\t\t\tcontent.insertELM(d);\n\t\t\t}\n\t\t\telse\n\t\t\t\tcontent.addELM(d);\n\t\t}\n\t\telse\n\t\t{\n\t\t\t_items[id].update(data);\n\t\t}\n\t}\n\n\tvar header  = null;\n\tif(_addData)\n\t{\n\n\t\theader = SelectionHeader({\n\t\t\tonKeyup:function(value){\n\t\t\t\tif(_onFilter)\n\t\t\t\t\t_onFilter(value,_originalData,_refreshData);\n\t\t\t},\n\t\t\tonFocus:function(){\n\t\t\t\tif(_onFocus)\n\t\t\t\t\t_onFocus(_this.update);\n\t\t\t},\n\t\t\tonBlur:function(){\n\t\t\t\tif(_onBlur)\n\t\t\t\t\t_onBlur(_this.update);\n\t\t\t},\n\t\t\tonAdd:function(text,callback){\n\n\t\t\t\tcontent.insertELM(addingElm);\n\n\t\t\t\t_addData(text,_selectionSessionData,function(newLists){\n\t\t\t\t\t\n\n\t\t\t\t\taddingElm.parentNode.removeChild(addingElm);\n\n\t\t\t\t\tcallback(newLists);\n\n\t\t\t\t\t_showOriginalData();\n\t\t\t\t\t\n\t\t\t\t\tfor(var i = 0; i < newLists.length; i++)\n\t\t\t\t\t{\n\t\t\t\t\t\tvar newList = newLists[i];\n\t\t\t\t\t\tnewList.isSelected = true;\n\t\t\t\t\t\t_addEntry(newList,true);\n\n\t\t\t\t\t\tvar id = null;\n\t\t\t\t\t\tif(newList.id)\n\t\t\t\t\t\t\tid = data.id\n\t\t\t\t\t\telse if(newList._id)\n\t\t\t\t\t\t\tid = newList._id\n\n\t\t\t\t\t\t_selectedItems[id] = newList;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tcontent_scroll.scrollTop = 0;\n\n\n\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t}\n\telse if (_searchData)\n\t{\n\t\tvar clearContent = function(){\n\n\t\t\tcontent.scrollTop = 0;\n\n\t\t\t_selectedItems = {};\n\t\t\t_unSelectedItems = {};\n\n\t\t\tfor(var id in _items)\n\t\t\t{\n\t\t\t\tvar item = _items[id];\n\n\t\t\t\titem.getELM().parentNode.removeChild(item.getELM());\n\t\t\t}\n\t\t\t_items = [];\n\n\t\t};\n\t\theader = new SelectionSearchHeader({\n\t\t\tonFocus:function(){\n\t\t\t\tif(_onFocus)\n\t\t\t\t{\n\t\t\t\t\tclearContent();\n\t\t\t\t\t_onFocus(_this.update,_originalData,_refreshData);\n\t\t\t\t}\n\t\t\t},\n\t\t\tonBlur:function(){\n\t\t\t\tif(_onBlur)\n\t\t\t\t\t_onBlur(_this.update);\n\t\t\t},\n\t\t\tonSearch:function(text,callback){\n\n\n\n\t\t\t\tplcHolder.style.display = \"none\";\n\n\n\t\t\t\tloadingSpinner.style.display = \"block\";\n\n\n\t\t\t\tclearContent();\n\n\t\t\t\t\n\t\t\t\t_searchData(text,_selectionSessionData,function(results){\n\t\t\t\t\t\n\t\t\t\t\tloadingSpinner.style.display = \"none\";\n\t\t\t\t\t\n\t\t\t\t\t\n\t\t\t\t\tcallback(results);\n\n\t\t\t\t\tfor(var i = 0; i < results.length; i++)\n\t\t\t\t\t{\n\t\t\t\t\t\tvar result = results[i];\n\t\t\t\t\t\t_addEntry(result,true);\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tcontent_scroll.scrollTop = 0;\n\n\n\t\t\t\t\tif(results.length == 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tif(_config.emptyMessage)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tplcHolder.innerHTML = \"Can't find a friend? <br/>\" + '<a class=\"email\" title=\"Email a friend\" href=\"\" onclick=\"javascript:window.location=\\'mailto:?subject=Feedback on Bestlyst?&body=I thought you might have great feedback or ideas for Bestlyst: \\' + window.location;\">Invite</a>'\n\t\t\t\t\t\t\t +\" them to bestlyst.\";\n\t\t\t\t\t\t\tplcHolder.style.display = 'block';\n\t\t\t\t\t\t\tcontent_scroll.addELM(plcHolder);\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t}\n\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n\tvar _showOriginalData = function()\n\t{\n\t\tcontent.scrollTop = 0;\n\n\t\tfor(var id in _items)\n\t\t{\n\t\t\tvar item = _items[id];\n\n\t\t\titem.getELM().parentNode.removeChild(item.getELM());\n\t\t}\n\n\t\t_items = {};\t\n\t\t\t\t\t\t\n\t\tfor(var i = 0; i < _originalData.length; i++)\n\t\t{\n\t\t\t_addEntry(_originalData[i],false);\n\t\t}\t\n\t}\n\n\n\tvar _clearData = function()\n\t{\n\t\t_selectedItems = {};\n\t\t_unSelectedItems = {};\n\n\t\tbtDone.style.display = 'none';\n\t\tplcHolder.style.display = \"none\";\n\t\tif(header)\n\t\t\theader.getELM().style.display = 'none';\n\n\t\tcontent.scrollTop = 0;\n\n\t\tfor(var id in _items)\n\t\t{\n\t\t\tvar item = _items[id];\n\n\t\t\titem.getELM().parentNode.removeChild(item.getELM());\n\t\t}\n\n\t\t_items = {};\n\n\t\tcontent.style.display = 'block';\n\n\n\t}\n\n\t_this.getELM = function()\n\t{\n\t\treturn elm;\n\t}\n\t\n\n\t_this.getHTML = function()\n\t{\n\t\tif(_addData || _searchData)\n\t\t\telm.addELM(header);\n\n\n\t\tif(_config.headerTemplate)\n\t\t{\n\t\t\telm.addELM(_config.headerTemplate);\n\t\t}\n\n\t\tcontent_scroll.addELM(content);\n\t\telm.addELM(content_scroll);\n\t\t\n\t\t\n\t\tif(_footer)\n\t\t\telm.addELM(_footer);\n\t\t\n\t\tif(_itemTemplate)\n\t\t\telm.addELM(btDone);\n\t\t\n\t\t\n\n\t\treturn elm;\n\t}\n\t_this.onSelect = function(isSelected,data,e){\n\n\n\t\tvar id = null;\n\t\tif(data.id)\n\t\t\tid = data.id\n\t\telse if(data._id)\n\t\t\tid = data._id\n\n\t\tif(isSelected)\n\t\t{\n\t\t\t_selectedItems[id] = data;\n\t\t\tif(_unSelectedItems[id])\n\t\t\t\tdelete _unSelectedItems[id];\n\n\t\t}\n\t\telse\n\t\t{\n\t\t\t_unSelectedItems[id] = data;\n\t\t\tif(_selectedItems[id])\n\t\t\t\tdelete _selectedItems[id];\n\t\t}\n\n\t\tif(_onSelectHandler)\n\t\t\t_onSelectHandler(isSelected,data,e);\n\n\n\t}\n\t\n\t_this.getSelections = function(){\n\t\treturn {\n\t\t\tsession:_selectionSessionData,\n\t\t\tselected:_selectedItems,\n\t\t\tunselected:_unSelectedItems\n\t\t}\n\t}\n\n\n\t_this.update = function(data)\n\t{\n\t\tif(data)\n\t\t{\t\n\t\t\t_originalData = data;\n\n\t\t\tbtDone.style.display = 'block';\n\t\t\tif(header)\n\t\t\t\theader.getELM().style.display = 'block';\n\n\t\t\tif(data.length > 0)\n\t\t\t{\n\t\t\t\tloadingSpinner.style.display = \"none\";\n\t\t\t\tplcHolder.style.display = \"none\";\n\t\t\t\t\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif(_config.emptyMessage)\n\t\t\t\t{\n\t\t\t\t\tloadingSpinner.style.display = \"none\";\n\t\t\t\t\tplcHolder.style.display = \"block\";\n\t\t\t\t}\n\t\t\t}\n\t\t\t\t\n\t\t\tfor(var i = 0; i < data.length; i++)\n\t\t\t{\n\t\t\t\t_addEntry(data[i],false);\n\t\t\t}\n\t\n\t\t\tif(_footer)\n\t\t\t\t_footer.show();\n\t\t}\n\t}\n\n\n\t_this.disableContent = function(message){\n\t\t\n\t\tbtDone.style.display = 'none';\n\t\tif(header)\n\t\t\theader.getELM().style.display = 'none';\n\n\t\tcontent.scrollTop = 0;\n\n\t\tcontent.style.display = 'none';\n\n\t\tif(message)\n\t\t\tloadingSpinner.innerHTML = message;\n\t\n\t\t\n\t\tloadingSpinner.style.display = \"block\";\n\t}\n\t_this.finish = function()\n\t{\n\t\tif(header)\n\t\t\theader.reset();\n\t\tif(_finishedSelection)\n\t\t\t_finishedSelection(_selectionSessionData,_selectedItems,_unSelectedItems);\t\t\n\t}\n\t_this.show = function(isShow)\n\t{\n\t\t\n\t\tif(isShow == true)\n\t\t{\t\t\n\t\t\t_clearData();\n\n\t\t\tloadingSpinner.style.display = \"block\";\n\t\t\tloadingSpinner.innerHTML = 'Loading...';\n\n\n\t\t\tif(_getData)\n\t\t\t{\n\t\t\t\tif(_footer)\n\t\t\t\t\t_footer.hide();\n\n\t\t\t\t_getData(_selectionSessionData,_this.update);\n\t\t\t}\n\t\t}\n\n\t\tif(_onShow)\n\t\t\t_onShow(isShow);\n\t}\n\t_this.setSessionData = function(sdata) //this gets passed back when done\n\t{\n\t\t_selectionSessionData = sdata;\n\t\tif(_footer)\n\t\t\tif(_footer.setSessionData)\n\t\t\t\t_footer.setSessionData(sdata);\n\t},\n\t_this.onDone = function()\n\t{\n\t\tif(_onDone)\n\t\t\t_onDone();\n\t}\n\n\treturn _this;\n\n\n},\nBindInputsToData:function(params,data)\n{\n\n\tvar _this = this;\n\n\t\"use strict\";\n\t//private variables\n\tvar model = {};\n\tvar _data = data;\n\tvar _css = params.css,\n\t\t_onChange = params.onChange,\n\t\t_onAdd = params.onAdd,\n\t\t_onDelete = params.onDelete;\n\n\tif(!_data)\n\t\t_data = {};\n\n\tvar _allInputElms = {};\n\tvar _allRowElms = {};\n\n\n\t//DOM elements / templates here\n \tvar _elm = cELM('div',_css);\n \tif(params.template)\n \t\t_elm.innerHTML = params.template;\n \telse if(params.dom)\n \t\t_elm = params.dom;\n\n\n \tvar _change = function(e){\n \t\tvar data_type = this.getAttribute('data-type');\n \t\tvar data_value = this.getAttribute('data-value')\n \t\tvar data_table_column = this.getAttribute('data-table-column');\t\n \t\tvar type = this.type;\n\n \t\tvar source = this.source;\n \t\tvar rowIdx = this.rowIdx;\n \t\tvar column = this.column;\n\n \t\tif(data_type == 'picker')\n \t\t{\n \t\t\tif(!_data[this.source])\n \t\t\t\t_data[this.source] = [];\n\n \t\t\tif(data_table_column)\n \t\t\t{\n\t \t\t\tif(this.checked)\n\t \t\t\t{\n\t \t\t\t\tvar rowData = {}\n\t\t\t\t\trowData.guid = guidGenerator();\n\t\t\t\t\trowData[data_table_column] = data_value;\n\n\t \t\t\t\t_data[this.source].push(rowData);\n\n\t \t\t\t\t//TODO add row if applicable\n\t \t\t\t}\n\t \t\t\telse\n\t \t\t\t{\n\t \t\t\t\tvar removeIdx = -1;\n\t \t\t\t\tfor(var i = 0; i < _data[this.source].length; i++)\n\t \t\t\t\t{\n\t \t\t\t\t\tvar rowData = _data[this.source][i];\n\t \t\t\t\t\tif(rowData[data_table_column] == data_value)\n\t \t\t\t\t\t\tremoveIdx = i;\n\t \t\t\t\t}\n\n\t \t\t\t\t_data[this.source].splice(removeIdx,1);\n\n\t \t\t\t\t//TODO remove\n\t \t\t\t} \t\t\n\n \t\t\t}\n \t\t\telse\n \t\t\t{\n\t \t\t\tif(this.checked)\n\t \t\t\t{\n\t \t\t\t\t_data[this.source].push(data_value);\n\t \t\t\t}\n\t \t\t\telse\n\t \t\t\t{\n\t \t\t\t\tvar removeIdx = -1;\n\t \t\t\t\tfor(var i = 0; i < _data[this.source].length; i++)\n\t \t\t\t\t{\n\t \t\t\t\t\tvar v = _data[this.source][i];\n\t \t\t\t\t\tif(v == data_value)\n\t \t\t\t\t\t\tremoveIdx = i;\n\t \t\t\t\t}\n\n\t \t\t\t\t_data[this.source].splice(removeIdx,1);\n\t \t\t\t} \t\t\t\t\n \t\t\t}\n\n\n \t\t\t\n \t\t}\n\t\telse\n\t\t{\n\t\t\tvar dValue = null;\n\t\t\tif(type =='checkbox' || type == 'radio')\n\t\t\t{\n\t\t\t\tvar groupname = this.getAttribute('name');\n\t\t\t\tif(groupname)\n\t\t\t\t{\n\t\t\t\t\tvar relatedInputs = document.querySelectorAll('input[name=\"'+groupname+'\"]');\n\t\t\t\t\tfor(var ri = 0; ri < relatedInputs.length; ri++)\n\t\t\t\t\t{\n\t\t\t\t\t\tvar relatedInput = relatedInputs[ri]\n\t\t\t\t\t\tvar rSource = relatedInput.getAttribute('data-src');\n\t\t\t\t\t\tif(_data[rSource])\n\t\t\t\t\t\t\t_data[rSource] = false;\n\t\t\t\t\t}\t\t\n\t\t\t\t}\n\n\t\t\t\tdValue = this.checked;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tdValue = this.value;\n\t\t\t}\n\n\n\t\t\tif(rowIdx === undefined)\n\t\t\t{\n\t\t\t\t_data[this.source] = dValue;\t\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\t_data[this.source][rowIdx][column] = dValue;\n\t\t\t}\n\t\n\t\t\t\t\n\t\t}\n\n\t\t\n\t\tif(_onChange)\n\t\t\t_onChange(this.source,this); \t\t\n \t}\n\n \tvar bindInput = function(element,data,attribute,prefixHash)\n \t{\n \t\t\n\n \t\tvar qi = \"input[\"+attribute+\"]\";\n \t\tvar qt = \"textarea[\"+attribute+\"]\";\n \t\tvar inputIn = element.querySelectorAll(qi);\n\t\tvar inputText = element.querySelectorAll(qt);\n\n\t\tvar inputs = [];\n\n\t\tfor(var i = 0; i < inputIn.length; i++)\n\t\t{\n\t\t\tinputs.push(inputIn[i])\n\t\t}\n\n\t\tfor(var i = 0; i < inputText.length; i++)\n\t\t{\n\t\t\tinputs.push(inputText[i])\n\t\t}\n\n\t\tfor(var i = 0; i < inputs.length; i++)\n\t\t{\n\t\t\tvar data_type = inputs[i].getAttribute('data-type');\n\t\t\tvar data_value = inputs[i].getAttribute('data-value');\n\t\t\tvar data_column = inputs[i].getAttribute('data-table-column');\n\t\t\tvar type = inputs[i].type;\n\t\t\tvar inp = inputs[i];\n\t\t\tvar prop = inputs[i].getAttribute(attribute);\n\n\t\t\tinp.source = prop;\n\t\t\tinp.onchange = _change;\n\t\t\tinp.onkeyup = _change;\n\t\t\t\n\t\t\t//row items\n\t\t\tvar refHash = inp.source;\n\n\t\t\tif(prefixHash) // for table data\n\t\t\t{\n\t\t\t\tvar parts = prefixHash.split('|');\n\t\t\t\tvar tb = parts[0];\n\t\t\t\tvar rowIdx = parts[1];\n\n\t\t\t\tinp.source = tb;\n\t\t\t\tinp.rowIdx = rowIdx;\n\t\t\t\tinp.column = data_column;\n\n\t\t\t\tif(!_allInputElms[tb])\n\t\t\t\t\t_allInputElms[tb] = [];\n\n\t\t\t\tif(!_allInputElms[tb][rowIdx])\n\t\t\t\t\t_allInputElms[tb][rowIdx] = {};\n\n\t\t\t\t_allInputElms[tb][rowIdx][data_column] = inp;\n\t\t\t\t\t\t\t\t\n\t\t\t\t\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif(data_column)\n\t\t\t\t\tif(data_column != prop)\n\t\t\t\t\t{\n\t\t\t\t\t\trefHash = refHash + '|'+data_column; \n\t\t\t\t\t}\n\n\t\t\t\tif(data_value)\n\t\t\t\t{\n\t\t\t\t\trefHash = refHash + '|'+data_value; \n\t\t\t\t}\n\n\t\t\t\tif(!_allInputElms[refHash])\n\t\t\t\t{\n\t\t\t\t\t_allInputElms[refHash] = inp;\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tif(attribute != 'data-table-column' && data_type ? data_type != 'picker' : false)\n\t\t\t\t\t{\n\t\t\t\t\t\tconsole.log('duplicate: '+refHash);\n\t\t\t\t\t}\n\t\t\t\t\n\t\t\t\t}\t\t\t\t\n\t\t\t}\n\n\n\n\t\t}\n\n \t}\n\n \tvar tables = _elm.querySelectorAll('div[data-format=\"table\"]');\n \t\n \tvar onAddRow = function(e,data,rowIdx)\n \t{\n\t\tvar rowData = {}\n\t\trowData.guid = guidGenerator();\t\n\t\tif(data)\n\t\t\trowData = data;\n\t\t\n\t\tvar idx = 0;\n\t\tif(rowIdx !== undefined)\n\t\t{\n\t\t\tidx = rowIdx;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif(_data[this.source])\n\t\t\t\tidx = _data[this.source].length;\n\t\t}\n\n\n\t\tvar row = this.template.cloneNode(true);\n\t\tbindInput(row,rowData,'data-table-column',this.source+'|'+idx);\n\t\trow.guid = rowData.guid;\n\n\t\tif(!_allRowElms[this.source])\n\t\t\t_allRowElms[this.source] = [];\n\n\t\t_allRowElms[this.source][idx] = row;\n\n\t\t//clear template data\n\t\tfor(var i = 0; i < row.childNodes.length; i++)\n\t\t{\n\t\t\tvar r = row.childNodes[i];\n\t\t\tif(r.nodeName == \"INPUT\")\n\t\t\t\tr.value = null;\n\t\t}\n\n\t\tvar btDelete = row.querySelector('div[data-control=\"delete\"]');\n\t\tif(btDelete)\n\t\t{\n\t\t\tbtDelete.template = row;\n\t\t\tbtDelete.source = prop;\n\t\t\tbtDelete.onclick = function(e)\n\t\t\t{\n\t\t\t\tif(this.template.parentNode)\n\t\t\t\t\tthis.template.parentNode.removeChild(this.template);\n\n\t\t\t\tvar d = _data[this.source];\n\t\t\t\tvar deleteIdx = -1;\n\t\t\t\tfor(var i = 0; i < d.length; i++)\n\t\t\t\t{\n\t\t\t\t\tvar guid = d[i].guid\n\t\t\t\t\tif(guid)\n\t\t\t\t\t{\n\t\t\t\t\t\tif(guid == this.template.guid)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tdeleteIdx = i;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif(deleteIdx > -1)\n\t\t\t\t{\n\t\t\t\t\t_allInputElms[this.source].splice(deleteIdx,1);\n\t\t\t\t\t_data[this.source].splice(deleteIdx,1);\n\t\t\t\t\t//console.log(_data[this.source]);\n\t\t\t\t\t_onChange(this.source,this);\n\t\t\t\t}\n\n\n\t\t\t} \t\t\t\t\n\t\t}\n\t\t\n\t\tthis.parentNode.insertBefore(row,this);\n\t\t\n\t\tif(!data)\n\t\t{\n\t\t\t//created new entry\n\t\t\t_data[this.source].push(rowData);\n\t\t}\n\n \t}\n \t\n \tbindInput(_elm,_data,'data-src');\n\n \t\n \tfor(var i = 0; i < tables.length; i++)\n \t{\n \t\tvar tb = tables[i];\n \t\tvar prop = tb.getAttribute('data-src');\n \t\tvar rowTemplate = tb.querySelector('div[data-format=\"row\"]');\n\n \t\tvar btAdd = tb.querySelector('div[data-control=\"add\"]');\n \t\tbtAdd.template = rowTemplate;\n \t\tbtAdd.source = prop;\n \t\tbtAdd.onclick = onAddRow;\n\n \t\trowTemplate.parentNode.removeChild(rowTemplate);\n\n \t\n \t\tif(!_data[prop])\n\t\t{\n\t\t\t_data[prop] = [];\n\t\t\tbtAdd.onclick();\n\t\t}\n\t\telse if (_data[prop].length == 0)\n\t\t{\n\t\t\tbtAdd.onclick();\t\n\t\t}\n\t\telse\n \t\t{\n\t\t\tfor(var k = 0; k < _data[prop].length; k++)\n \t\t\t{\n \t\t\t\tvar d = _data[prop][k];\n \t\t\t\tbtAdd.onclick(null,d,k);\n \t\t\t}\n \t\t}\n\n \t}\n\n \tvar _setInputValue = function(inp,dateInputValue)\n \t{\n \t\tvar type = inp.type;\n\t\tvar data_src = inp.getAttribute('data-src');\n\t\tvar data_type = inp.getAttribute('data-type');\n\t\tvar data_value = inp.getAttribute('data-value');\n\t\tvar data_column = inp.getAttribute('data-table-column');\n\t\t\n\t\tif(data_type == 'picker')\n\t\t{\n\t\t\tinp.checked = true;\n\t\t}\n\t\telse if(type == 'checkbox' || type == 'radio')\n\t\t{\n\t\t\tinp.checked = dateInputValue;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tinp.value = dateInputValue;\n\t\t}\t\t\n \t}\n\n \t_this.update = function(dataSet)\n \t{\n \t\t//check to see if array elements needs to be synced\n \t\t//_data = dataSet; @aaronrau, cannot break reference here for binding\n \t\tfor(var p in dataSet)\n \t\t{\n \t\t\tvar updatedTables = dataSet[p];\n \t\t\tif(Array.isArray(updatedTables))\n \t\t\t{\n \t\t\t\tvar diff = updatedTables.length - _data[p].length;\n\n \t\t\t\t//need to add elements from UI\n\t\t\t\tif(diff > 0)\n\t\t\t\t{\n\t \t\t\t\tfor(var i = 0; i < tables.length; i++)\n\t\t\t\t\t{\n\t\t\t\t\t\tvar tb = tables[i];\n\t\t\t\t \t\tvar prop = tb.getAttribute('data-src');\n\t\t\t\t \t\tif(prop == p)\n\t\t\t\t \t\t{\n\t\t\t\t\t \t\tvar btAdd = tb.querySelector('div[data-control=\"add\"]');\n\t\t\t\t\t \t\tif(btAdd)\n\t\t\t\t\t \t\t{\n\t\t\t\t\t \t\t\tvar l = updatedTables.length;\n\t\t\t\t\t\t\t\tfor(var k = l-diff; k < updatedTables.length; k++)\n\t\t\t\t\t \t\t\t{\n\t\t\t\t\t \t\t\t\tvar d = updatedTables[k];\n\t\t\t\t\t \t\t\t\tbtAdd.onclick(null,d,k);\n\t\t\t\t\t \t\t\t}\n\t\t\t\t\t \t\t}\n\n\t\t\t\t \t\t}\t\t\n\t\t\t\t\t}\n\n\t\t\t\t}//need to remove elements for UI\n\t\t\t\telse if(diff < 0)\n\t\t\t\t{\n\t\t\t\t\tvar l = _allRowElms[p].length;\n\t\t\t\t\tfor(var i = l + diff; i < Math.abs(l); i++)\n\t\t\t\t\t{\n\t\t\t\t\t\tvar rowElm = _allRowElms[p][i];\n\t\t\t\t\t\tif(rowElm.parentNode)\n\t\t\t\t\t\t\trowElm.parentNode.removeChild(rowElm);\n\t\t\t\t\t}\n\n\t\t\t\t\tfor(var i = 0; i < Math.abs(diff);i++)\n\t\t\t\t\t{\n\t\t\t\t\t\t_allRowElms[p].splice(_allRowElms[p].length -1,1);\t\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t}\n \t\t\t}\n\n \t\t\t_data[p] = dataSet[p];\n \t\t}\n\n \t\n \t\tfor(var prop in _data)\n \t\t{\n \t\t\tvar value = _data[prop]; \t\n \t\t\tif(Array.isArray(value))\n \t\t\t{\n \t\t\t\t\n \t\t\t\tfor(var i = 0; i < value.length; i++)\n \t\t\t\t{\n \t\t\t\t\t\n \t\t\t\t\tvar rowData = value[i];\n \t\t\t\t\tvar row = i;\n\n \t\t\t\t\tif(_allInputElms[prop])\n \t\t\t\t\t\tif(_allInputElms[prop][row])\n\t \t\t\t\t\t{\n\t\t \t\t\t\t\tfor(var rProp in rowData)\n\t\t \t\t\t\t\t{\n\t\t \t\t\t\t\t\tvar rowItemValue = rowData[rProp];\n\t\t \t\t\t\t\t\tvar column = rProp;\n\t\t \t\t\t\t\t\tvar pickerHash = prop+'|'+rProp+'|'+rowItemValue;\n\t\t \t\t\t\t\n\t\t \t\t\t\t\t\tif(_allInputElms[prop][row][column])\n\t\t \t\t\t\t\t\t{\t\t\t\n\t\t \t\t\t\t\t\t\t_setInputValue(_allInputElms[prop][row][column],rowItemValue);\n\t\t \t\t\t\t\t\t}\n\n\t\t \t\t\t\t\t\tif(_allInputElms[pickerHash.trim()])\n\t\t \t\t\t\t\t\t{\n\t\t \t\t\t\t\t\t\t_setInputValue(_allInputElms[pickerHash.trim()],rowItemValue);\n\t\t \t\t\t\t\t\t}\n\t\t \t\t\t\t\t}\n\t \t\t\t\t\t}\n \t\t\t\t}\n \t\t\t}\n \t\t\telse\n \t\t\t{\n \t\t\t\tvar hash = prop;\n \t\t\t\t\n \t\t\t\tif(_allInputElms[hash])\n \t\t\t\t\t_setInputValue(_allInputElms[hash],value);\n \t\t\t}\n \t\t}\n\n\n\n \t}\n\t_this.getData = function()\n\t{\n\t\treturn _data;\n\t}\n\n\t_this.getELM = function()\n\t{ //just returns the main element\n\t\treturn _elm;\n\t}\n\n\t_this.getHTML = function()\n\t{ //build / render html elements here\n\n\t\treturn _elm;\n\t}\n\n\n\t_this.update(_data);\n\n\treturn _this;\n},\n/*Convert a model into a bunch of input fields*/\nBindModelToInputs:function(className,model,mode,onChange)\n{\n\n\n\n\tvar elm = cELM('div',className);\n\n\tfor(var prop in model)\n\t{\n\t\tif(mode == 'form' || mode == 'form_withLabel')\n\t\t{\n\t\t\tvar isArray = false;\n\t\t\tif (Array.isArray)\n\t\t\t{\n\t    \t\tif (Array.isArray(model[prop]))\n\t    \t\t\tisArray = true;\n\t    \t}\n\t    \telse if( Object.prototype.toString.call( model[prop] ) === '[object Array]' )\n\t    \t\tisArray = true;\n\n\t    \tif(isArray)\n\t    \t\tfor(i = 0; i <  model[prop].length; i++)\n\t    \t\t{\n\n\t    \t\t}\n\t\t}\n\t\telse if(mode == 'data')\n\t\t{\n\t\t\tif(typeof model[prop] === \"object\")\n\t\t\t{\n\t\t\t\tfor(subProp in model[prop])\n\t\t\t\t{\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t}\n\n\treturn elm;\n},\n/*Popover buttons*/\nExpandButton:function(params){\n\t\tvar ExpandButton ={}\n\n\t\t/*\n\t\tparams = {\n\t\t\tbutton_text:'+',\n\t\t\tclassname:'list_add',\n\t\t\tselections:[\n\t\t\t\t{\n\t\t\t\t\tclassname:'btUpload',\n\t\t\t\t\ttext:'Upload',\n\t\t\t\t\tdetailText:'upload an existing list from the web',\n\t\t\t\t\tonclick:function(){}\n\t\t\t\t}\n\t\t\t];\n\t\t}\n\t\t*/\n\n\n\t\t//Private Property\n\t\tvar _data = {};\n\t\tvar _params = params;\n\t\tvar _selections = [];\n\n\t\tvar elm = cELM('div','button_expand '+ _params.classname);\n\t\n\t\tvar main_button = cELM('div','button');\n\t\tmain_button.innerHTML = params.button_text;\n\n\t\tvar expand = cELM('div','expand');\n\t\texpand.style.display = 'none';\n\n\t\tvar a1 = cELM('div','arrow_up1');\n\t\texpand.addELM(a1);\n\t\tvar a2 = cELM('div','arrow_up2');\n\t\texpand.addELM(a2);\n\n\t\tvar spacing = cELM('div','spacing');\n\t\tspacing.innerHTML = \"\";\n\t\texpand.addELM(spacing);\n\n\t\tfor(var i = 0;i < params.selections.length;i++)\n\t\t{\n\t\t\tvar d = params.selections[i];\n\n\t\t\tvar button = cELM('div','section '+d.classname);\n\t\t\tbutton.onclick = d.onclick;\n\n\t\t\tvar icon = cELM('div','icon');\n\t\t\tbutton.addELM(icon);\n\n\t\t\tvar txt = cELM('div','text');\n\t\t\ttxt.innerHTML = d.text;\n\t\t\tbutton.addELM(txt);\n\n\t\t\tvar dtxt = cELM('div','detail_text');\n\t\t\tdtxt.innerHTML = d.detailText;\n\t\t\tbutton.addELM(dtxt);\n\n\t\t\texpand.addELM(button);\n\t\t}\n\n\t\tmain_button.onclick = function(e)\n\t\t{\n\t\t\tif(app.controls.expandButtons)\n\t\t\tfor(var i = 0; i < app.controls.expandButtons.length; i++)\n\t\t\t{\n\t\t\t\tif(app.controls.expandButtons[i] == expand)\n\t\t\t\t{\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tapp.controls.expandButtons[i].style.display = 'none';\n\t\t\t}\n\n\t\t\tif (!e) var e = window.event;\n\t        \te.cancelBubble = true;\n\t    \tif (e.stopPropagation) e.stopPropagation();\n\n\t\t\tif(expand.style.display == 'none')\n\t\t\t{\n\t\t\t\texpand.style.display = 'block';\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\texpand.style.display = 'none';\n\t\t\t}\n\t\t}\n\n\t\tExpandButton.click = function(e)\n\t\t{\n\t\t\tmain_button.onclick(e);\n\t\t}\n\n\t\t//document.body.appendChild(elm);\n\n\n\t\tExpandButton.getHTML = function()\n\t\t{\n\t\t\tif(!app.controls.expandButtons)\n\t\t\t\tapp.controls.expandButtons = [];\n\n\t\t\tapp.controls.expandButtons.push(expand);\n\n\t\t\tdocument.body.addEventListener(\"click\", function(e) {\n\n\t\t\t\t\n\t\t\t\tif (!e) var e = window.event;\n\t        \te.cancelBubble = true;\n\t    \t\tif (e.stopPropagation) e.stopPropagation();\n\n\t    \t\texpand.style.display = 'none'\n\t\t\t});\n\t\t\t\n\t\t\telm.addELM(main_button);\n\t\t\telm.addELM(expand);\n\t\t\n\t\t\treturn elm;\n\t\t}\n\n\n\treturn ExpandButton;\n\t},\n/*--------------------*/\nProgressBar:function(params){\n\tvar _this ={}\n\tvar _params = params;\n\n\tvar elm = cELM('div','progress');\n\tvar bar = cELM('div','progress-bar');\n\tvar barLabel = cELM('div','progress-bar-label');\n\t\n\t_this.update = function(percent)\n\t{\n\t\tbar.style.width = percent + '%';\n\t\tbarLabel.innerHTML = percent + '%';\n\t}\n\t_this.getELM = function()\n\t{\n\t\treturn elm;\n\t}\n\t_this.getHTML = function()\n\t{\n\n\t\telm.addELM(bar);\n\t\telm.addELM(barLabel);\n\n\t\n\t\treturn elm;\n\t}\n\n\treturn _this;\n},\n/*--------------------*/\nSegment:function(params){\n\tvar _this ={}\n\tvar _params = params;\n\n\tvar _elm = cELM('div','segments');\n\t\n\tvar _segElms = [];\n\t\t\n\n\tvar clearSelect = function()\n\t{\n\t\tfor(var i = 0; i < _segElms.length; i++)\n\t\t{\n\t\t\t_segElms[i].className = \"segment\";\n\t\t}\n\t}\n\n\n\tif(_params.segments)\n\t{\n\t\n\t \tfor(var i = 0; i < _params.segments.length; i++)\n\t \t{\n\t \t\t var segD = _params.segments[i];\n \n\t \t\t var sg = cELM('div','segment');\n\n\t \t\t if(i == 0)\n\t \t\t \tsg.className = 'segment selected';\n\n\t \t\t sg.innerHTML = segD.label;\n\t \t\t sg.value = segD.value;\n\t \t\t sg.onSelect = segD.onSelect;\n\t \t\t sg.onclick = function(e){\n\t \t\t \tclearSelect();\n\n\t\t\t\tthis.className = 'segment selected';\n\t\t\t\tthis.onSelect(this.value);\n\n\t \t\t }\n\n\n\n\t \t\t _elm.addELM(sg);\n\t \t\t _segElms.push(sg)\n\n\t \t}\n\t}\t \n\n\t_this.getELM = function()\n\t{ //just returns the main element\n\t\treturn _elm;\n\t},\n\t_this.getHTML = function()\n\t{ //build / render html elements here\n\n\t\treturn _elm;\n\t}\n\n\treturn _this;\n}\n\n}});"],"sourceRoot":"/source/"}